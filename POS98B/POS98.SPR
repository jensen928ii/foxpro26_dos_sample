*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        03/12/04              POS98.SPR                13:57:15 
*                                                                
*       픔컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        Author's Name                                           
*                                                                
*        Copyright (c) 2004 Company Name                         
*        Address                                                 
*        City,     Zip                                           
*                                                                
*        Description:                                            
*        This program was automatically generated by GENSCRN.    
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴

PARAMETERS lookupmode, ;
	 keyscope, ;
	 lreturn, ;
	 prekey, ;
	 predata1

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*                  POS98/MS-DOS Setup Code - SECTION 1           
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*

#REGION 1

** Start of inserted file ..\INIT.PRG 컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴start
if parameters() < 4 and ;
 	 parameters() > 0
	if lookupmode
	  do postremote
	else
	  do preremote
	endif	
	return
endif

***
* control variable

private addmode, ;
				oldkey, ;
				arraysize, ;
				itemfrom, ;
				itemlen, ;
				oldv, ;
				oldv2, ;
				maxno, ;
				pointer, ;
				editfield, ;
				itemfindx, ;
				warning, ;
				savecall, ;
				saveprint,;
				saveprint2, ;
				saveprint3, ;
				breakhour, ;
				breakmin, ;
				starthour, ;
				startmin, ;
				before, ;
				after, ;
				tempalias, ;
				headfile, ;
				linefile, ;
				linkdbf, ;
				linkmodule, ;
				savemodule, ;
				cashdrawer, ;
				checkno, ;
				idcheck, ;
				delimiter, ;
				holdvia, ;
				holdcat, ;
				stampcheck, ;
				roundcents, ;
				cashdirect, ;
				manaualtext, ;
				edittitle, ;
				discbyamt, ;
				sortby, ;
				startobj, ;
				autotable, ;
				today, ;
				editterms, ;
				askduedate, ;
				byserver, ;
				askcompany, ;
				autoclear, ;
				askc2, ;
				askemploy, ;
				creditterm, ;
				creditvia, ;
				autologin, ;
				postdate, ;
				autoinit, ;
				initprg, ;
				initvia, ;
				random, ;
				areafile, ;
				autor, ;
				asknotice, ;
				asknotice2, ;
				sort2bycat, ;
				printat1, ;
				automode, ;
				autovia, ;
				autolow, ;
				autohigh, greeting, ;
				promptr1, ;
				forceyes, exitkey, ;
				editkey, infokey, ;
				addkey, ;
				clearkey, autocard, ;
				tipsmode, cardi, ;
				splitkey, cardresult, ;
				timelog, ;
				applycash, ;
				hello1, offkey, ;
				afteroff, tablefield, ;
				checkorder, ;
				clicheck, ;
				numlock1, ;
				pbwindow, ;
				lastcat, ;
				min1, ;
				setpaykey, ;
				confirm, ;
				longitem, ;
				uselast, ;
				lookufield, ;
				mid, ;
				touchscreen, ;
				resetcode, ;
				today1, ;
				shipkey, ;
				pricekey, ;
				custkey, ;
				exitprg

m.exitprg = ''
m.custkey = ''
m.pricekey = ''
m.shipkey = ''
m.today1  = ''
m.resetcode = 0
m.touchscreen = .f.
m.mid = ''				
m.uselast = ''
m.lookufield = ''				
m.longitem = ''
m.confirm = ''
m.setpaykey = ''
m.min1 = ''
m.lastcat = ''
m.pbwindow = 'jbrowser'				
m.numlock1 = ''
m.clicheck = ''
m.tablefield = ''				
m.checkorder = ''
m.afteroff = 0				
m.offkey = ''	
m.addkey = ''			
m.hello1 = ''				
m.applycash = ''				
m.timelog = ''				
m.cardresult = ''
m.splitkey = ''				
m.cardi = ''				
m.tipsmode = ''				
m.autocard = ''				
m.editkey = ''
m.infokey = ''
m.clearkey = ''
m.exitkey = ''				
m.promptr1 = ''
m.forceyes = ''
m.greeting = ''
m.creditterm = ''
m.creditrate = 0
m.creditvia = ''
m.autolow = 0
m.autohigh = 0
m.autovia = ''				
m.automode = ''
m.printat1 = ''				
m.sort2bycat = ''
m.saveprint3 = ''
m.asknotice = ''
m.asknotice2 = ''
m.autor = ''
m.areafile = ''

if !m.lookupmode
	m.login = ''
endif
m.random = ''				
m.autologin = ''
m.postdate = ''
m.initvia = ''
m.askemploy = ''
m.autoclear = ''
m.askc2 = ''
m.initprg = ''
m.autoinit = ''				
m.askcompany = ''
m.byserver = ''
m.askduedate = ''
m.editterms = ''
m.today = {//}
m.autotable = ''
m.startobj = 0
m.sortby = ''				
m.discbyamt = ''				
m.manualtext = 'manual'				
m.edittitle = ''
m.cashdirect = ''
m.roundcents = ''
m.stampcheck = ''
m.delimiter = ''
m.holdvia = ''
m.holdcat = ''
m.idcheck = ''
m.checkno = ''
m.cashdrawer = ''				
m.savemodule = ''				
m.linkdbf = ''
m.linkmodule = ''
m.tempalias = 'pos3'
m.headfile = 'pos'
m.linefile = 'pos2'				
m.breakhour = 0
m.breakmin = 0
m.starthour = 0
m.startmin = 0
m.before = ''
m.after = ''
m.oldkey = ''
m.oldv = ''
m.oldv2 = 'pos98'
m.arraysize = 15
m.itemlen = 8
m.itemfrom = 15
m.itemfindx = .t.
m.addmode = .t.
m.editfield = .t.
m.savecall = ''
m.saveprint = ''
m.saveprint2 = ''
m.warning = ''
m.maxno = 1
m.pointer = 1

private catsearch
m.catsearch = ''

***
* header fields variable

private	pos, ;
				clients, orderdate, ;
				deliveryon, taxrate, ;
				terms, discdate, discper ;
				duedate, via, fob, ;
				subtotal, salestax, discount, ;
				nettotal, ;
				total, balance, note, ;
				firstname, ;
				lastname, ;
				address1, ;
				address2, ;
				address3, ;
				city, ;
				state, ;
				zip, ;
				zip4, ;
				employee, ;
				surcharge, ;
				chargerate, ;
				approved, ;
				register, ;
				company, ;
				misc, ;
				misc2, ;
				notepad, ;
				member, ;
				off

				
m.off = 0				
m.member = ''				
m.notepad = ''
m.misc = ' '
m.misc2 = ''
m.company = ''
m.register = ''
m.approved = .f.
m.pos = ''
m.clients = ''
m.orderdate = date()
m.deliveryon = date()
m.taxrate = 0
m.terms = ''
m.discdate = date()
m.discper = 0
m.duedate = date()
m.via = ''
m.fob = ''
m.subtotal = 0
m.nettotal = 0
m.salestax = 0
m.discount = 0
m.total = 0
m.balance = 0
m.note = ''
m.firstname = ''
m.lastname = ''
m.address1 = ''
m.address2 = ''
m.address3 = ''
m.city = ''
m.state = ''
m.zip = ''
m.zip4 = ''
m.employee = ''
m.surcharge = 0
m.chargerate = 0
* payment headfile

private payment, change, method, cardno
m.method = ''
m.payment = 0
m.change = 0
m.cardno = ''

*line
dimension itemfile(m.arraysize), ;
					lno(m.arraysize), ;
					itemcode(m.arraysize), ;
					link(m.arraysize), ;
					keylink(m.arraysize)


dimension	itemname(m.arraysize), ;
					unit0(m.arraysize), ;
					title(m.arraysize), ;
					tracking(m.arraysize), ;
					sort1(m.arraysize), ;
					sort0(m.arraysize), ;
					subtitle(m.arraysize), ;
					shipped(m.arraysize), ;
					parttax(m.arraysize), ;
					labortax(m.arraysize), ;
					price(m.arraysize), ;
					laborhour(m.arraysize), ;
					laborcost(m.arraysize), ;
					performby(m.arraysize), ;
					backorder(m.arraysize), ;
					linedisc(m.arraysize), ;
					extended(m.arraysize), ;
					checkin(m.arraysize), ;
					returndate(m.arraysize), ;
					commission(m.arraysize), ;
					name1(m.arraysize), ;
					cost(m.arraysize), ;
					minprice(m.arraysize)
					


*line
store '' to itemfile
store '' to link
store '' to keylink
store 0 to lno
store '' to itemcode

*line
store '' to itemname
store '' to title
store '' to subtitle
store 1 to shipped
store '' to parttax
store 0 to price
store '' to labortax
store 0 to laborhour
store 0 to laborcost
store '' to performby
store 0 to backorder
store 0 to linedisc
store 0 to extended
store {//} to checkin
store {//} to returndate
store 0 to commission
store '' to name1
store 0 to cost
store 0 to minprice
store '' to unit0
store '' to tracking
store '' to sort1
store '' to sort0

*display variables
private language, ;
				m.m00, ;
				m0, m1, m2, m3, m4, m5, m6, m7, ;
				m8, m9, m10, m11, m12, m13, m14, ;
				m15, m16, m17, m18, m19, m20, ;
				m21, m22, m23, ;
				m00a, m0a, m1a, m2a, m3a, m4a, ;
				m5a, m6a, m7a, m8a, m9a, m10a, ;
				m11a, m12a, m13a, m14a, m15a, ;
				m16a, m17a, m18a, m19a, m20a, ;
				m21a, m22a, m23a, ;
				membercredit

m.membercredit = 0
m.language = ''
m.m00 = ''
m.m0 = ''
m.m1 = ''
m.m2 = ''
m.m3 = ''
m.m4 = ''
m.m5 = ''
m.m6 = ''
m.m7 = ''
m.m8 = ''
m.m9 = ''
m.m10 = ''
m.m11 = ''
m.m12 = ''
m.m13 = ''
m.m14 = ''
m.m15 = ''
m.m16 = ''
m.m17 = ''
m.m18 = ''
m.m19 = ''
m.m20 = ''
m.m21 = ''
m.m22 = ''
m.m23 = ''
m.m00 = ''
m.m0a = ''
m.m1a = ''
m.m2a = ''
m.m3a = ''
m.m4a = ''
m.m5a = ''
m.m6a = ''
m.m7a = ''
m.m8a = ''
m.m9a = ''
m.m10a = ''
m.m11a = ''
m.m12a = ''
m.m13a = ''
m.m14a = ''
m.m15a = ''
m.m16a = ''
m.m17a = ''
m.m18a = ''
m.m19a = ''
m.m20a = ''
m.m21a = ''
m.m22a = ''
m.m23a = ''
m.m00a = ''

* disable screen variable

private _misc, ;				
				_lno, ;
				_via, ;
				_company, ;
				_employee, ;
				_clients, ;
				_notepad, ;
				initprog
				
m.areafrom = ''
m.initprog = ''
m._misc = ''
m._lno = ''
m._via = ''
m._company = ''
m._employee = ''
m._clients = ''
m._notepad = ''

if rdlevel() = 5
  =stopbox('NOT ENOUGH MEMORY')
  return
endif

if parameters()=0
  m.lreturn = ''
	m.keyscope = '.t.'
	m.lookupmode = .f.
	m.lreturn = ''
	m.prekey = ''
	m.predata1 = ''

**alert
* if !empty(m.predataX)
*   screen activate:
*		add show get m.predatax disable
*		procedure init
*		add m.XXX = m.predataX
* endif
endif

push menu _msysmenu
do selectm
do loadtable
do init

if !scheck('pos98','')
  return
endif


** End of inserted file ..\INIT.PRG 컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴end


m.itemlen = 8
m.itemfrom = 15
m.arraysize = 12


#REGION 0
REGIONAL m.currarea, m.talkstat, m.compstat

IF SET("TALK") = "ON"
	SET TALK OFF
	m.talkstat = "ON"
ELSE
	m.talkstat = "OFF"
ENDIF
m.compstat = SET("COMPATIBLE")
SET COMPATIBLE FOXPLUS

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*                       MS-DOS Window definitions                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*

IF NOT WEXIST("pos98") ;
	OR UPPER(WTITLE("POS98")) == "POS98.PJX" ;
	OR UPPER(WTITLE("POS98")) == "POS98.SCX" ;
	OR UPPER(WTITLE("POS98")) == "POS98.MNX" ;
	OR UPPER(WTITLE("POS98")) == "POS98.PRG" ;
	OR UPPER(WTITLE("POS98")) == "POS98.FRX" ;
	OR UPPER(WTITLE("POS98")) == "POS98.QPR"
	DEFINE WINDOW pos98 ;
		FROM 1, 0 ;
		TO 24,79 ;
		NOFLOAT ;
		NOCLOSE ;
		NOMINIMIZE ;
		NONE ;
		COLOR SCHEME 21
ENDIF


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*                      POS98/MS-DOS Screen Layout                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*

#REGION 1
IF WVISIBLE("pos98")
	ACTIVATE WINDOW pos98 SAME
ELSE
	ACTIVATE WINDOW pos98 NOSHOW
ENDIF
@ 4,0 TO 4,79
@ 2,13 TO 2,55
@ 23,40 SAY "-" ;
	SIZE 1,1, 0
@ 0,60 SAY "/" ;
	SIZE 1,1, 0
@ 17,0 TO 17,79
@ 18,46 TO 23,46
@ 18,55 TO 19,55
@ 18,61 TO 23,61
@ 18,69 TO 23,69
@ 0,40 TO 1,40
@ 20,47 TO 20,60
@ 0,24 SAY "/" ;
	SIZE 1,1, 0
@ 2,57 SAY "*" ;
	SIZE 1,1, 0
@ 3,13 SAY "Qty" ;
	SIZE 1,3, 0
@ 3,26 SAY "Price" ;
	SIZE 1,5, 0
@ 3,0 SAY "Item" ;
	SIZE 1,4, 0
@ 3,33 SAY "Disc" ;
	SIZE 1,4, 0
@ 3,40 SAY "Total" ;
	SIZE 1,5, 0
@ 1,24 SAY "/" ;
	SIZE 1,1, 0
@ 1,29 SAY "#" ;
	SIZE 1,1, 0
@ 3,20 SAY "Unit" ;
	SIZE 1,4, 0
@ 0,0 GET m.m3 ;
	SIZE 1,13 ;
	DEFAULT " " ;
	PICTURE "@J" ;
	WHEN .f.
@ 0,14 GET m.employee ;
	SIZE 1,10 ;
	DEFAULT " " ;
	WHEN empw() ;
	VALID empv()
@ 0,25 GET m.clients ;
	SIZE 1,15 ;
	DEFAULT " " ;
	PICTURE "@!" ;
	WHEN cliw() ;
	VALID cliv()
@ 0,41 GET m.m2 ;
	SIZE 1,10 ;
	DEFAULT " " ;
	PICTURE "@J" ;
	WHEN .f.
@ 0,52 GET m.balance ;
	SIZE 1,8 ;
	DEFAULT 0 ;
	PICTURE "9999999.99" ;
	WHEN .f.
@ 0,61 GET m.orderdate ;
	SIZE 1,10 ;
	DEFAULT {  /  /  } ;
	WHEN .f.
@ 0,72 GET m.fob ;
	SIZE 1,8 ;
	DEFAULT " " ;
	WHEN .f.
@ 1,0 GET m.m1 ;
	SIZE 1,13 ;
	DEFAULT " " ;
	PICTURE "@J" ;
	WHEN .f.
@ 1,14 GET m.via ;
	SIZE 1,10 ;
	DEFAULT " " ;
	WHEN viaw()
@ 1,25 GET m.company ;
	SIZE 1,4 ;
	DEFAULT " " ;
	WHEN comw()
@ 1,30 GET m.misc ;
	SIZE 1,10 ;
	DEFAULT " " ;
	WHEN miscw() ;
	VALID miscv()
@ 1,41 GET m.notepad ;
	SIZE 1,39 ;
	DEFAULT " "
@ 2,1 GET m.approved ;
	PICTURE "@*C Warning" ;
	SIZE 1,11 ;
	DEFAULT 0 ;
	VALID appv() ;
	DISABLE
@ 2,59 GET m.terms ;
	SIZE 1,10 ;
	DEFAULT " " ;
	WHEN m.editterms != 'N'
@ 2,70 GET m.duedate ;
	SIZE 1,10 ;
	DEFAULT {  /  /  } ;
	WHEN .f.
@ 5,0 GET itemcode[1] ;
	SIZE 1,12 ;
	DEFAULT " " ;
	PICTURE "@!" ;
	WHEN _16s0twqgk() ;
	VALID _16s0twqgp()
@ 5,13 GET shipped[1] ;
	SIZE 1,7 ;
	DEFAULT 0 ;
	PICTURE "9999.99" ;
	WHEN _16s0twqgt() ;
	VALID _16s0twqgw()
@ 5,21 GET unit0[1] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	WHEN _16s0twqh1() ;
	VALID _16s0twqh3()
@ 5,25 GET price[1] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "99999.99" ;
	WHEN _16s0twqh8() ;
	VALID _16s0twqit()
@ 5,34 GET linedisc[1] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	PICTURE "99" ;
	WHEN _16s0twqiu() ;
	VALID _16s0twqiv()
@ 5,38 GET extended[1] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "99999.99" ;
	WHEN .f.
@ 5,47 GET tracking[1] ;
	SIZE 1,33 ;
	DEFAULT " " ;
	WHEN _16s0twqiw() ;
	VALID _16s0twqix()
@ 5,78 GET lno[1] ;
	SIZE 1,2 ;
	DEFAULT " " ;
	PICTURE "99999.99" ;
	WHEN .f.
@ 6,0 GET itemcode[2] ;
	SIZE 1,12 ;
	DEFAULT " " ;
	PICTURE "@!" ;
	WHEN _16s0twqiy() ;
	VALID _16s0twqiz() ;
	DISABLE
@ 6,13 GET shipped[2] ;
	SIZE 1,7 ;
	DEFAULT 0 ;
	PICTURE "9999.99" ;
	WHEN _16s0twqjm() ;
	VALID _16s0twql8() ;
	DISABLE
@ 6,21 GET unit0[2] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	WHEN _16s0twqlb() ;
	VALID _16s0twqld() ;
	DISABLE
@ 6,25 GET price[2] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "99999.99" ;
	WHEN _16s0twqlg() ;
	VALID _16s0twqli() ;
	DISABLE
@ 6,34 GET linedisc[2] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	PICTURE "99" ;
	WHEN _16s0twqll() ;
	VALID _16s0twqlm() ;
	DISABLE
@ 6,38 GET extended[2] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "9999999.99" ;
	WHEN .f. ;
	DISABLE
@ 6,47 GET tracking[2] ;
	SIZE 1,33 ;
	DEFAULT " " ;
	WHEN _16s0twqlq() ;
	VALID _16s0twqls() ;
	DISABLE
@ 6,78 GET lno[2] ;
	SIZE 1,2 ;
	DEFAULT " " ;
	PICTURE "9999999.99" ;
	WHEN .f. ;
	DISABLE
@ 7,0 GET itemcode[3] ;
	SIZE 1,12 ;
	DEFAULT " " ;
	PICTURE "@!" ;
	WHEN _16s0twqlt() ;
	VALID _16s0twqlu() ;
	DISABLE
@ 7,13 GET shipped[3] ;
	SIZE 1,7 ;
	DEFAULT 0 ;
	PICTURE "9999.99" ;
	WHEN _16s0twqm1() ;
	VALID _16s0twqm3() ;
	DISABLE
@ 7,21 GET unit0[3] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	WHEN _16s0twqm6() ;
	VALID _16s0twqm8() ;
	DISABLE
@ 7,25 GET price[3] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "99999.99" ;
	WHEN _16s0twqma() ;
	VALID _16s0twqol() ;
	DISABLE
@ 7,34 GET linedisc[3] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	PICTURE "99" ;
	WHEN _16s0twqon() ;
	VALID _16s0twqoq() ;
	DISABLE
@ 7,38 GET extended[3] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "9999999.99" ;
	WHEN .f. ;
	DISABLE
@ 7,47 GET tracking[3] ;
	SIZE 1,33 ;
	DEFAULT " " ;
	WHEN _16s0twqot() ;
	VALID _16s0twqow() ;
	DISABLE
@ 7,78 GET lno[3] ;
	SIZE 1,2 ;
	DEFAULT " " ;
	PICTURE "9999999.99" ;
	WHEN .f. ;
	DISABLE
@ 8,0 GET itemcode[4] ;
	SIZE 1,12 ;
	DEFAULT " " ;
	PICTURE "@!" ;
	WHEN _16s0twqox() ;
	VALID _16s0twqoy() ;
	DISABLE
@ 8,13 GET shipped[4] ;
	SIZE 1,7 ;
	DEFAULT 0 ;
	PICTURE "9999.99" ;
	WHEN _16s0twqoz() ;
	VALID _16s0twqp0() ;
	DISABLE
@ 8,21 GET unit0[4] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	WHEN _16s0twqp1() ;
	VALID _16s0twqpb() ;
	DISABLE
@ 8,25 GET price[4] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "99999.99" ;
	WHEN _16s0twqpe() ;
	VALID _16s0twqpk() ;
	DISABLE
@ 8,34 GET linedisc[4] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	PICTURE "99" ;
	WHEN _16s0twqpn() ;
	VALID _16s0twqpq() ;
	DISABLE
@ 8,38 GET extended[4] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "9999999.99" ;
	WHEN .f. ;
	DISABLE
@ 8,47 GET tracking[4] ;
	SIZE 1,33 ;
	DEFAULT " " ;
	WHEN _16s0twqpt() ;
	VALID _16s0twqpw() ;
	DISABLE
@ 8,78 GET lno[4] ;
	SIZE 1,2 ;
	DEFAULT " " ;
	PICTURE "9999999.99" ;
	WHEN .f. ;
	DISABLE
@ 9,0 GET itemcode[5] ;
	SIZE 1,12 ;
	DEFAULT " " ;
	PICTURE "@!" ;
	WHEN _16s0twqpz() ;
	VALID _16s0twqq1() ;
	DISABLE
@ 9,13 GET shipped[5] ;
	SIZE 1,7 ;
	DEFAULT 0 ;
	PICTURE "9999.99" ;
	WHEN _16s0twqrn() ;
	VALID _16s0twqrp() ;
	DISABLE
@ 9,21 GET unit0[5] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	WHEN _16s0twqrs() ;
	VALID _16s0twqru() ;
	DISABLE
@ 9,25 GET price[5] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "99999.99" ;
	WHEN _16s0twqrx() ;
	VALID _16s0twqry() ;
	DISABLE
@ 9,34 GET linedisc[5] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	PICTURE "99" ;
	WHEN _16s0twqrz() ;
	VALID _16s0twqs0() ;
	DISABLE
@ 9,38 GET extended[5] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "9999999.99" ;
	WHEN .f. ;
	DISABLE
@ 9,47 GET tracking[5] ;
	SIZE 1,33 ;
	DEFAULT " " ;
	WHEN _16s0twqs1() ;
	VALID _16s0twqs2() ;
	DISABLE
@ 9,78 GET lno[5] ;
	SIZE 1,2 ;
	DEFAULT " " ;
	PICTURE "9999999.99" ;
	WHEN .f. ;
	DISABLE
@ 10,0 GET itemcode[6] ;
	SIZE 1,12 ;
	DEFAULT " " ;
	PICTURE "@!" ;
	WHEN _16s0twqs3() ;
	VALID _16s0twqsf() ;
	DISABLE
@ 10,13 GET shipped[6] ;
	SIZE 1,7 ;
	DEFAULT 0 ;
	PICTURE "9999.99" ;
	WHEN _16s0twqsi() ;
	VALID _16s0twqsl() ;
	DISABLE
@ 10,21 GET unit0[6] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	WHEN _16s0twqso() ;
	VALID _16s0twqsq() ;
	DISABLE
@ 10,25 GET price[6] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "99999.99" ;
	WHEN _16s0twqst() ;
	VALID _16s0twqsu() ;
	DISABLE
@ 10,34 GET linedisc[6] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	PICTURE "99" ;
	WHEN _16s0twqsx() ;
	VALID _16s0twqt0() ;
	DISABLE
@ 10,38 GET extended[6] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "9999999.99" ;
	WHEN .f. ;
	DISABLE
@ 10,47 GET tracking[6] ;
	SIZE 1,33 ;
	DEFAULT " " ;
	WHEN _16s0twqt2() ;
	VALID _16s0twqt5() ;
	DISABLE
@ 10,78 GET lno[6] ;
	SIZE 1,2 ;
	DEFAULT " " ;
	PICTURE "9999999.99" ;
	WHEN .f. ;
	DISABLE
@ 11,0 GET itemcode[7] ;
	SIZE 1,12 ;
	DEFAULT " " ;
	PICTURE "@!" ;
	WHEN _16s0twqur() ;
	VALID _16s0twquu() ;
	DISABLE
@ 11,13 GET shipped[7] ;
	SIZE 1,7 ;
	DEFAULT 0 ;
	PICTURE "9999.99" ;
	WHEN _16s0twquw() ;
	VALID _16s0twquy() ;
	DISABLE
@ 11,21 GET unit0[7] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	WHEN _16s0twquz() ;
	VALID _16s0twqv0() ;
	DISABLE
@ 11,25 GET price[7] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "99999.99" ;
	WHEN _16s0twqv1() ;
	VALID _16s0twqv2() ;
	DISABLE
@ 11,34 GET linedisc[7] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	PICTURE "99" ;
	WHEN _16s0twqv3() ;
	VALID _16s0twqv4() ;
	DISABLE
@ 11,38 GET extended[7] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "9999999.99" ;
	WHEN .f. ;
	DISABLE
@ 11,47 GET tracking[7] ;
	SIZE 1,33 ;
	DEFAULT " " ;
	WHEN _16s0twqv5() ;
	VALID _16s0twqvj() ;
	DISABLE
@ 11,78 GET lno[7] ;
	SIZE 1,2 ;
	DEFAULT " " ;
	PICTURE "9999999.99" ;
	WHEN .f. ;
	DISABLE
@ 12,0 GET itemcode[8] ;
	SIZE 1,12 ;
	DEFAULT " " ;
	PICTURE "@!" ;
	WHEN _16s0twqvm() ;
	VALID _16s0twqvp() ;
	DISABLE
@ 12,13 GET shipped[8] ;
	SIZE 1,7 ;
	DEFAULT 0 ;
	PICTURE "9999.99" ;
	WHEN _16s0twqvr() ;
	VALID _16s0twqvt() ;
	DISABLE
@ 12,21 GET unit0[8] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	WHEN _16s0twqvv() ;
	VALID _16s0twqvy() ;
	DISABLE
@ 12,25 GET price[8] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "99999.99" ;
	WHEN _16s0twqw1() ;
	VALID _16s0twqw2() ;
	DISABLE
@ 12,34 GET linedisc[8] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	PICTURE "99" ;
	WHEN _16s0twqw6() ;
	VALID _16s0twqw7() ;
	DISABLE
@ 12,38 GET extended[8] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "9999999.99" ;
	WHEN .f. ;
	DISABLE
@ 12,47 GET tracking[8] ;
	SIZE 1,33 ;
	DEFAULT " " ;
	WHEN _16s0twqxu() ;
	VALID _16s0twqxw() ;
	DISABLE
@ 12,78 GET lno[8] ;
	SIZE 1,2 ;
	DEFAULT " " ;
	PICTURE "9999999.99" ;
	WHEN .f. ;
	DISABLE
@ 13,0 GET itemcode[9] ;
	SIZE 1,12 ;
	DEFAULT " " ;
	PICTURE "@!" ;
	WHEN _16s0twqy0() ;
	VALID _16s0twqy2() ;
	DISABLE
@ 13,13 GET shipped[9] ;
	SIZE 1,7 ;
	DEFAULT 0 ;
	PICTURE "9999.99" ;
	WHEN _16s0twqy3() ;
	VALID _16s0twqy4() ;
	DISABLE
@ 13,21 GET unit0[9] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	WHEN _16s0twqy5() ;
	VALID _16s0twqy6() ;
	DISABLE
@ 13,25 GET price[9] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "99999.99" ;
	WHEN _16s0twqy7() ;
	VALID _16s0twqy8() ;
	DISABLE
@ 13,34 GET linedisc[9] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	PICTURE "99" ;
	WHEN _16s0twqy9() ;
	VALID _16s0twqyl() ;
	DISABLE
@ 13,38 GET extended[9] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "9999999.99" ;
	WHEN .f. ;
	DISABLE
@ 13,47 GET tracking[9] ;
	SIZE 1,33 ;
	DEFAULT " " ;
	WHEN _16s0twqyp() ;
	VALID _16s0twqyr() ;
	DISABLE
@ 13,78 GET lno[9] ;
	SIZE 1,2 ;
	DEFAULT " " ;
	PICTURE "9999999.99" ;
	WHEN .f. ;
	DISABLE
@ 14,0 GET itemcode[10] ;
	SIZE 1,12 ;
	DEFAULT " " ;
	PICTURE "@!" ;
	WHEN _16s0twqyv() ;
	VALID _16s0twqzx() ;
	DISABLE
@ 14,13 GET shipped[10] ;
	SIZE 1,7 ;
	DEFAULT 0 ;
	PICTURE "9999.99" ;
	WHEN _16s0twr01() ;
	VALID _16s0twr02() ;
	DISABLE
@ 14,21 GET unit0[10] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	WHEN _16s0twr06() ;
	VALID _16s0twr08() ;
	DISABLE
@ 14,25 GET price[10] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "99999.99" ;
	WHEN _16s0twr0a() ;
	VALID _16s0twr0d() ;
	DISABLE
@ 14,34 GET linedisc[10] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	PICTURE "99" ;
	WHEN _16s0twr0f() ;
	VALID _16s0twr0h() ;
	DISABLE
@ 14,38 GET extended[10] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "9999999.99" ;
	WHEN .f. ;
	DISABLE
@ 14,47 GET tracking[10] ;
	SIZE 1,33 ;
	DEFAULT " " ;
	WHEN _16s0twr0l() ;
	VALID _16s0twr26() ;
	DISABLE
@ 14,78 GET lno[10] ;
	SIZE 1,2 ;
	DEFAULT " " ;
	PICTURE "9999999.99" ;
	WHEN .f. ;
	DISABLE
@ 15,0 GET itemcode[11] ;
	SIZE 1,12 ;
	DEFAULT " " ;
	PICTURE "@!" ;
	WHEN _16s0twr29() ;
	VALID _16s0twr2c() ;
	DISABLE
@ 15,13 GET shipped[11] ;
	SIZE 1,7 ;
	DEFAULT 0 ;
	PICTURE "9999.99" ;
	WHEN _16s0twr2f() ;
	VALID _16s0twr2h() ;
	DISABLE
@ 15,21 GET unit0[11] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	WHEN _16s0twr2k() ;
	VALID _16s0twr2l() ;
	DISABLE
@ 15,25 GET price[11] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "99999.99" ;
	WHEN _16s0twr2m() ;
	VALID _16s0twr2n() ;
	DISABLE
@ 15,34 GET linedisc[11] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	PICTURE "99" ;
	WHEN _16s0twr2o() ;
	VALID _16s0twr2p() ;
	DISABLE
@ 15,38 GET extended[11] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "9999999.99" ;
	WHEN .f. ;
	DISABLE
@ 15,47 GET tracking[11] ;
	SIZE 1,33 ;
	DEFAULT " " ;
	WHEN _16s0twr2z() ;
	VALID _16s0twr31() ;
	DISABLE
@ 15,78 GET lno[11] ;
	SIZE 1,2 ;
	DEFAULT " " ;
	PICTURE "9999999.99" ;
	WHEN .f. ;
	DISABLE
@ 16,0 GET itemcode[arraysize] ;
	SIZE 1,12 ;
	DEFAULT " " ;
	PICTURE "@!" ;
	WHEN _16s0twr34() ;
	VALID _16s0twr37() ;
	DISABLE
@ 16,13 GET shipped[arraysize] ;
	SIZE 1,7 ;
	DEFAULT 0 ;
	PICTURE "9999.99" ;
	WHEN _16s0twr3a() ;
	VALID _16s0twr3c() ;
	DISABLE
@ 16,21 GET unit0[arraysize] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	WHEN _16s0twr3f() ;
	VALID _16s0twr3h() ;
	DISABLE
@ 16,25 GET price[arraysize] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "99999.99" ;
	WHEN _16s0twr3k() ;
	VALID _16s0twr3m() ;
	DISABLE
@ 16,34 GET linedisc[arraysize] ;
	SIZE 1,3 ;
	DEFAULT " " ;
	PICTURE "99" ;
	WHEN _16s0twr3p() ;
	VALID _16s0twr5a() ;
	DISABLE
@ 16,38 GET extended[arraysize] ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "9999999.99" ;
	WHEN .f. ;
	DISABLE
@ 16,47 GET tracking[arraysize] ;
	SIZE 1,33 ;
	DEFAULT " " ;
	WHEN _16s0twr5e() ;
	VALID _16s0twr5g() ;
	DISABLE
@ 16,78 GET lno[arraysize] ;
	SIZE 1,2 ;
	DEFAULT " " ;
	PICTURE "9999999.99" ;
	WHEN .f. ;
	DISABLE
@ 18,0 GET m.m11 ;
	SIZE 1,4 ;
	DEFAULT " " ;
	PICTURE "@J" ;
	WHEN .f.
@ 18,5 GET m.firstname ;
	SIZE 1,35 ;
	DEFAULT " " ;
	VALID _16s0twr5j()
@ 19,5 GET m.lastname ;
	SIZE 1,35 ;
	DEFAULT " " ;
	WHEN namecheck()
@ 20,0 GET m.m12 ;
	SIZE 1,4 ;
	DEFAULT " " ;
	PICTURE "@J" ;
	WHEN .f.
@ 20,5 GET m.address1 ;
	SIZE 1,40 ;
	DEFAULT " " ;
	WHEN namecheck()
@ 21,5 GET m.address2 ;
	SIZE 1,40 ;
	DEFAULT " " ;
	WHEN namecheck()
@ 22,5 GET m.address3 ;
	SIZE 1,40 ;
	DEFAULT " " ;
	WHEN namecheck()
@ 23,5 GET m.city ;
	SIZE 1,15 ;
	DEFAULT " " ;
	WHEN namecheck()
@ 23,21 GET m.m22 ;
	SIZE 1,5 ;
	DEFAULT " " ;
	PICTURE "@J" ;
	WHEN .f.
@ 23,27 GET m.state ;
	SIZE 1,2 ;
	DEFAULT " " ;
	WHEN namecheck()
@ 23,30 GET m.m23 ;
	SIZE 1,4 ;
	DEFAULT " " ;
	PICTURE "@J" ;
	WHEN .f.
@ 23,35 GET m.zip ;
	SIZE 1,5 ;
	DEFAULT " " ;
	WHEN namecheck() ;
	VALID _16s0twr5k()
@ 23,41 GET m.zip4 ;
	SIZE 1,4 ;
	DEFAULT " " ;
	WHEN namecheck()
@ 18,47 GET m.m13 ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "@J" ;
	WHEN .f.
@ 18,56 GET m.discount ;
	SIZE 1,5 ;
	DEFAULT 0 ;
	PICTURE "99.99" ;
	WHEN _16s0twr5l() ;
	VALID _16s0twr5m()
@ 18,62 GET m.m16 ;
	SIZE 1,7 ;
	DEFAULT " " ;
	PICTURE "@J" ;
	WHEN .f.
@ 18,70 GET m.subtotal ;
	SIZE 1,10 ;
	DEFAULT 0 ;
	PICTURE "9999999.99" ;
	WHEN .f.
@ 19,47 GET m.m14 ;
	SIZE 1,8 ;
	DEFAULT " " ;
	PICTURE "@J" ;
	WHEN .f.
@ 19,56 GET m.taxrate ;
	SIZE 1,5 ;
	DEFAULT 0 ;
	PICTURE "99.99" ;
	WHEN _16s0twr61() ;
	VALID _16s0twr64()
@ 19,62 GET m.m17 ;
	SIZE 1,7 ;
	DEFAULT " " ;
	PICTURE "@J" ;
	WHEN .f.
@ 19,70 GET m.salestax ;
	SIZE 1,10 ;
	DEFAULT 0 ;
	PICTURE "9999999.99" ;
	WHEN .f.
@ 20,62 GET m.m18 ;
	SIZE 1,7 ;
	DEFAULT " " ;
	PICTURE "@J" ;
	WHEN .f.
@ 20,70 GET m.total ;
	SIZE 1,10 ;
	DEFAULT 0 ;
	PICTURE "9999999.99" ;
	WHEN _16s0twr67() ;
	VALID _16s0twr6a()
@ 22,49 GET m.method ;
	SIZE 1,10 ;
	DEFAULT " " ;
	VALID methodv()
@ 22,62 GET m.m19 ;
	SIZE 1,7 ;
	DEFAULT " " ;
	PICTURE "@J" ;
	WHEN .f.
@ 22,70 GET m.payment ;
	SIZE 1,10 ;
	DEFAULT 0 ;
	PICTURE "9999999.99" ;
	VALID _16s0twr6e()
@ 23,62 GET m.m20 ;
	SIZE 1,7 ;
	DEFAULT " " ;
	PICTURE "@J" ;
	WHEN .f.
@ 23,70 GET m.change ;
	SIZE 1,10 ;
	DEFAULT 0 ;
	PICTURE "9999999.99" ;
	WHEN .f.

IF NOT WVISIBLE("pos98")
	ACTIVATE WINDOW pos98
ENDIF

READ CYCLE ;
	VALID v2() timeout m.shutdown ;
	ACTIVATE _16s0twr6i()

RELEASE WINDOW pos98

#REGION 0
IF m.talkstat = "ON"
	SET TALK ON
ENDIF
IF m.compstat = "ON"
	SET COMPATIBLE ON
ENDIF


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*                       POS98/MS-DOS Cleanup Code                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*

#REGION 1
pop menu _msysmenu
return
** Start of inserted file ..\METHOD.PRG 컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴start
External Array 	itemfile, lno, ;
	itemcode, Link, keylink, ;
	itemname, Title, ;
	tracking, sort1, sort0, subtitle, ;
	shipped, parttax, ;
	labortax, price, ;
	laborhour, laborcost, ;
	performby, backorder, ;
	linedisc, Extended, ;
	checkin, returndate, ;
	unit0, commission, ;
	minprice, cost, name1

Procedure Init
Private i, j, loopinit

m.loopinit = .T.
m.j = .T.
i = 0

If !scheck('pos98','init')
	Return
Endif

*jensen

If !scheck2('pos98','tabled')
	if m.addmode
	  if m.balance > 0
	    m.oldv = 'V' + alltrim(str(m.balance,10,2))
		do save2
		do tabled2
	  endif
	endif
Endif

*template
m.numlock1 = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','numlock')),1))

If m.numlock1 != 'N'
	=Numlock(.T.)
Endif
m.itemfindx = .T.
m.oldkey = ''
m.addmode = .T.
m.maxno = 1
m.pointer = 1
m.afteroff = 0
m.resetcode = Val(getlocal('pos98','resetcode'))
m.mid = Upper(Alltrim(getlocal('pos98','mid')))
m.cardi = Alltrim(getlocal('pos98','cardi'))
m.uselast = Upper(Alltrim(getlocal('pos98','uselast')))
m.longitem = Upper(Alltrim(getlocal('pos98','longitem')))
m.greeting = Alltrim(getlocal('pos98','greeting'))
m.areafrom = Alltrim(getlocal('pos98','areafrom'))
m.creditterm = Alltrim(getlocal('pos98','creditterm'))
m.creditrate = Val(Alltrim(getlocal('pos98','creditrate')))
m.creditvia = Alltrim(getlocal('pos98','creditvia'))
m.initprg = Alltrim(getlocal('pos98','initprg'))
m.automode = Alltrim(getlocal('pos98','automode'))
m.autovia = Alltrim(getlocal('pos98','autovia'))
m.initvia = Alltrim(getlocal('pos98','initvia'))
m.cashdrawer = Alltrim(getlocal('pos98','cashdrawer'))
m.areafile = Alltrim(getlocal('pos98','areafile'))
m.linkdbf = Alltrim(getlocal('pos98','linkdbf'))
m.linkmodule = Alltrim(getlocal('pos98','linkmodule'))
m.savemodule = Alltrim(getlocal('pos98','savemodule'))
m.askemploy = Alltrim(getlocal('pos98','askemploy'))
m.asknotice = Alltrim(getlocal('pos98','asknotice'))
m.asknotice2 = Alltrim(getlocal('pos98','asknotice2'))
m.autoclear = Alltrim(getlocal('pos98','autoclear'))
m.askc2 = Alltrim(getlocal('pos98','askc2'))
m.askcompany = Alltrim(getlocal('pos98','askcompany'))
m.askmember = Alltrim(getlocal('pos98','askmember'))
m.exitkey = Alltrim(getlocal('pos98','exitkey'))
m.addkey = Alltrim(getlocal('pos98','addkey'))
m.offkey = Alltrim(getlocal('pos98','offkey'))
m.infokey = Alltrim(getlocal('pos98','infokey'))
m.shipkey = Alltrim(getlocal('pos98','shipkey'))
m.pricekey = Alltrim(getlocal('pos98','pricekey'))
m.custkey = alltrim(getlocal('pos98','custkey'))
m.checkorder = Alltrim(getlocal('pos98','checkorder'))
m.min1 = Alltrim(getlocal('pos98','min1'))
m.setpaykey = Alltrim(getlocal('pos98','setpaykey'))
m.confirm = Alltrim(getlocal('pos98','confirm'))
m.exitprg = alltrim(getlocal('pos98','exitprg'))

If Empty(m.checkorder)
	m.checkorder = 'clients'
Endif
m.tablefield = Alltrim(getlocal('pos98','tablefield'))
If Empty(m.tablefield)
	m.tablefield = 'code'
Endif

m.lookufield = Alltrim(getlocal('pos98','lookufield'))

If Empty(m.lookufield)
	m.lookufield = 'clients,misc:h=[No.],method,total,via width 10'
Endif

m.editkey = Alltrim(getlocal('pos98','editkey'))
m.splitkey = Alltrim(getlocal('pos98','splitkey'))
m.clearkey = Alltrim(getlocal('pos98','clearkey'))
m.sortby = Alltrim(getlocal('pos98','sortby'))
If Val(Alltrim(getlocal('pos98','_jdblclick'))) > 0
	_jdblclick=Val(Alltrim(getlocal('pos98','_jdblclick')))
Endif
If Empty(m.sortby)
	m.sortby = 'getno'
Endif
m.manualtext = Alltrim(getlocal('pos98','manualtext'))
m.hello1 = Alltrim(getlocal('pos98','hello1'))
If Empty(m.manualtext)
	m.manualtext = '+'
Endif
m.holdvia = Alltrim(getlocal('pos98','holdvia'))
m.holdcat = Alltrim(getlocal('pos98','holdcat'))

m.delimiter = Alltrim(getlocal('pos98','delimiter'))

m.applycash = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','applycash')),1))

m.autocard = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','autocard')),1))


m.printat1 = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','printat1')),1))

m.sort2bycat = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','sort2bycat')),1))

m.random = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','random')),1))

m.postdate = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','postdate')),1))

m.timelog = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','timelog')),1))

m.autologin = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','autologin')),1))

m.autoinit = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','autoinit')),1))

m.autor = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','autor')),1))

m._lno = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','_lno')),1))

m._misc = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','_misc')),1))

m._via = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','_via')),1))
m._company = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','_company')),1))
m._employee = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','_employee')),1))
m._clients = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','_clients')),1))
m._notepad = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','_notepad')),1))
m.promptr1 = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','promptr1')),1))
m.tipsmode = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','tipsmode')),1))
m.forceyes = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','forceyes')),1))

m.membercredit = 0

If m._misc = 'N'
	Show Get m.misc Disable
Else
	Show Get m.misc Enable
Endif

If m._via = 'N'
	Show Get m.via Disable
Else
	Show Get m.via Enable
Endif

If m._company = 'N'
	Show Get m.company Disable
Else
	Show Get m.company Enable
Endif

If m._employee = 'N'
	Show Get m.employee Disable
Else
	Show Get m.employee Enable
Endif

If m._clients = 'N'
	Show Get m.clients Disable
Else
	Show Get m.clients Enable
Endif

If m._notepad = 'N'
	Show Get m.notepad Disable
Else
	Show Get m.notepad Enable
Endif

m.byserver = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','byserver')),1))

m.askduedate = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','askduedate')),1))

m.editterms = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','editterms')),1))


m.editfield = Iif(Upper(;
	left(;
	alltrim(;
	getlocal('pos98','editfield')),1));
	='N',.F.,.T.)
m.saveprint = Alltrim(getlocal('pos98','saveprint'))
m.saveprint2 = Alltrim(getlocal('pos98','saveprint2'))
m.saveprint3 = Alltrim(getlocal('pos98','saveprint3'))
m.savecall = Alltrim(getlocal('pos98','savecall'))
m.language = Upper(;
	left(;
	alltrim(getlocal('pos98','language')),1))
m.autotable = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','autotable')),1))

m.discbyamt = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','discbyamt')),1))

m.cashdirect = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','cashdirect')),1))

m.roundcents = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','roundcents')),1))

m.edittitle = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','edittitle')),1))

m.stampcheck = alltrim(getlocal('pos98','stampcheck'))
m.warning = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','warning')),1))
m.checkno = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','checkno')),1))
m.clicheck = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','clicheck')),1))
m.idcheck = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','idcheck')),1))

*module
Select (m.headfile)
Scatter Memo Memvar Blank

m.clients = Alltrim(getlocal('pos98','clients'))

m.autolow = Val(getlocal('pos98','autolow'))
m.autohigh = Val(getlocal('pos98','autohigh'))
m.breakhour = Val(getlocal('pos98','breakhour'))
m.breakmin = Val(getlocal('pos98','breakmin'))
m.before = Alltrim(getlocal('pos98','before'))
m.after = Alltrim(getlocal('pos98','after'))
m.starthour = Val(getlocal('pos98','starthour'))
m.startmin = Val(getlocal('pos98','startmin'))


m.orderdate = Iif( (Val(Sys(2)) < 3600 * m.starthour + ;
	60 * m.startmin),Date()-1,Date())


m.today1 = alltrim(getglobal('pos98','today1'))
if ctod(m.today1) != m.orderdate
	select global
	locate for program='pos98' .and. function = 'today1'
	if lockr()
		replace setting with dtoc(m.orderdate)
		unlock	
	endif
	locate for program = 'pos98' .and. function = 'counter2'
	if lockr()
		replace setting with alltrim(str(m.autolow))
		unlock	
	endif
endif

m.subtotal = 0
m.salestax = 0
m.discount = 0
m.off = 0
m.total = 0
m.balance = 0
m.note = ''
m.register = Alltrim(getlocal('pos98','register'))
m.employee = Alltrim(getlocal('pos98','employee'))
m.discdate = Val(getlocal('pos98','discdate')) ;
	+ m.orderdate
m.discper = Val(getlocal('pos98','discper'))
m.deliveryon = 	Val(getlocal('pos98','deliveryon')) ;
	+ m.orderdate
m.taxrate = Val(getlocal('pos98','taxrate'))
m.startobj = Val(getlocal('pos98','startobj'))

If m.autohigh = 0
	m.autohigh = 99
Endif


If m.breakhour != 0 .And. ;
		m.starthour != 0

	If (Val(Sys(2)) >= 3600 * m.breakhour + ;
			60 * m.breakmin) .Or. ;
			(Val(Sys(2)) < 3600 * m.starthour + ;
			60 * m.startmin)
		m.terms = m.after
	Else
		m.terms = m.before
	Endif

Else
	m.terms = Alltrim(getlocal('pos98','terms'))
Endif

m.via = getlocal('pos98','via')
m.catsearch = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','category')),1))
m.discount = Val(getlocal('pos98','discount'))
m.method = Alltrim(getlocal('pos98','method'))
m.cardno = ''
m.payment = 0
m.surcharge = 0
m.change = 0
m.chargerate = Val(getlocal('pos98','chargerate'))
m.city = Alltrim(getlocal('pos98','city'))
m.state = Alltrim(getlocal('pos98','state'))
m.zip = Alltrim(getlocal('pos98','zip'))
m.zip4 = Alltrim(getlocal('pos98','zip4'))
m.approved = .F.

=getglobal('pos98','counter1')
=getglobal('pos98','counter2')

*template

If Used(m.tempalias)
	Use In (m.tempalias)
Endif
Select (m.linefile)
Copy Stru To (m.tempalias) With Cdx
Use (m.tempalias) In 0 Excl
Select (m.tempalias)
Zap
Reindex
Append Blank
Replace lno With m.maxno
For i = 1 To m.arraysize
	Do emptykid With i
Endfor
lno[1] = m.maxno
For i = 2 To m.arraysize
	Do hidekid With i
Endfor

If !Wexist('pos98')
	Return
Endif

Do picklang

If !Empty(m.login)
	If scheck2('pos98','delete')
		Show Gets
		Return
	Endif
Endif

Do While loopinit
	m.loopinit = .F.

	If Empty(m.login) .Or. m.autologin != 'N'
		Do login2
		Do selectm
		Do checktl
		If m.oldv2 = 'restart'
			m.oldv2 = ''
			Do Init
			Return
		Endif
	Endif

	If !Empty(m.greeting)
		Do Alltrim(m.progdrv) + 'display.app' With .T.,m.greeting
	Endif

	Do While m.j
		If m.autoinit != 'N'
			Do startinit
		Endif
		If Alltrim(m.clients) = '*'
			m.clients = ''
			Do checkme
			If m.addmode
				Loop
			Endif
		Endif
		If !m.loopinit
			Do getclients
			If !m.touchscreen
				If Empty(m.clients)
					Do checkme
					If m.addmode
						If Lastkey() = 27
							Exit
						Else
							Loop
						Endif
					Endif
				Endif
			Endif
			If (Lastkey() = 27) .Or. ;
					!Empty(m.clients)
				Exit
			Endif
		Endif
	Enddo

	If m.loopinit
		m.j = .T.
		Loop
	Endif

	If !scheck2('pos98','host')
		If Empty(m.employee)
			m.employee = m.login
		Endif
	Endif

	_Curobj = firstkid()
	If !m.addmode
		Return
	Endif

	If Lastkey() != 27
		Do getemp
		Do getcompany
		Do getmember
		Do getmisc
		If !Empty(m.via)
			_Curobj = firstkid()
		Endif
	Endif
	Show Gets
	Do init2
Enddo
Return

Procedure init2
Return

Procedure picklang
If Language != 'N'
	m.m00 = Alltrim(getlocal('pos98','m00'))
	m.m0 = Alltrim(getlocal('pos98','m0'))
	m.m1 = Alltrim(getlocal('pos98','m1'))
	m.m2 = Alltrim(getlocal('pos98','m2'))
	m.m3 = Alltrim(getlocal('pos98','m3'))
	m.m4 = Alltrim(getlocal('pos98','m4'))
	m.m5 = Alltrim(getlocal('pos98','m5'))
	m.m6 = Alltrim(getlocal('pos98','m6'))
	m.m7 = Alltrim(getlocal('pos98','m7'))
	m.m8 = Alltrim(getlocal('pos98','m8'))
	m.m9 = Alltrim(getlocal('pos98','m9'))
	m.m10 = Alltrim(getlocal('pos98','m10'))
	m.m11 = Alltrim(getlocal('pos98','m11'))
	m.m12 = Alltrim(getlocal('pos98','m12'))
	m.m13 = Alltrim(getlocal('pos98','m13'))
	m.m14 = Alltrim(getlocal('pos98','m14'))
	m.m15 = Alltrim(getlocal('pos98','m15'))
	m.m16 = Alltrim(getlocal('pos98','m16'))
	m.m17 = Alltrim(getlocal('pos98','m17'))
	m.m18 = Alltrim(getlocal('pos98','m18'))
	m.m19 = Alltrim(getlocal('pos98','m19'))
	m.m20 = Alltrim(getlocal('pos98','m20'))
	m.m21 = Alltrim(getlocal('pos98','m21'))
	m.m22 = Alltrim(getlocal('pos98','m22'))
	m.m23 = Alltrim(getlocal('pos98','m23'))
	Do picklang2
Else
	m.m00 = Alltrim(getlocal('pos98','m00a'))
	m.m0 = Alltrim(getlocal('pos98','m0a'))
	m.m1 = Alltrim(getlocal('pos98','m1a'))
	m.m2 = Alltrim(getlocal('pos98','m2a'))
	m.m3 = Alltrim(getlocal('pos98','m3a'))
	m.m4 = Alltrim(getlocal('pos98','m4a'))
	m.m5 = Alltrim(getlocal('pos98','m5a'))
	m.m6 = Alltrim(getlocal('pos98','m6a'))
	m.m7 = Alltrim(getlocal('pos98','m7a'))
	m.m8 = Alltrim(getlocal('pos98','m8a'))
	m.m9 = Alltrim(getlocal('pos98','m9a'))
	m.m10 = Alltrim(getlocal('pos98','m10a'))
	m.m11 = Alltrim(getlocal('pos98','m11a'))
	m.m12 = Alltrim(getlocal('pos98','m12a'))
	m.m13 = Alltrim(getlocal('pos98','m13a'))
	m.m14 = Alltrim(getlocal('pos98','m14a'))
	m.m15 = Alltrim(getlocal('pos98','m15a'))
	m.m16 = Alltrim(getlocal('pos98','m16a'))
	m.m17 = Alltrim(getlocal('pos98','m17a'))
	m.m18 = Alltrim(getlocal('pos98','m18a'))
	m.m19 = Alltrim(getlocal('pos98','m19a'))
	m.m20 = Alltrim(getlocal('pos98','m20a'))
	m.m21 = Alltrim(getlocal('pos98','m21a'))
	m.m22 = Alltrim(getlocal('pos98','m22a'))
	m.m23 = Alltrim(getlocal('pos98','m23a'))
	Do picklang2
Endif
Do selectm
Return

Procedure picklang2
Private i
m.i = 1
If Language != 'N'
	Select (m.tempalias)
	Replace All tracking With Title
	For i = 1 To m.arraysize
		tracking(i) = Title(i)
	Endfor
Else
	Select (m.tempalias)
	Replace All tracking With subtitle
	For i = 1 To m.arraysize
		tracking(i) = subtitle(i)
	Endfor
Endif
Show Gets
Return

Procedure Table

If !scheck('pos98','table')
	Return
Endif

* Jkey .........................
* parameter 	lcwind, lcdir, ;
*							lcfile, lcorder, ;
*							lcField, lcCond

m.autotable = Upper(;
	left(;
	alltrim(;
	getlocal('pos98','autotable')),1))

Do Case
Case _Curobj = Objnum(m.zip)
	If jkey3('jbrowser',m.progdrv,;
			'zip','zip',;
			'zip','.t.')
		m.zip = zip.zip
		m.city = zip.city
		m.state = zip.state
		Show Get m.city
		Show Get m.state
		Show Get m.zip
	Endif
Case _Curobj = Objnum(m.terms)
	If jkey3('jbrowser',m.progdrv,;
			'terms','terms',;
			'terms','.t.')
		m.terms = terms.terms
		Show Get m.terms
		Do termsv
	Endif
Case _Curobj = Objnum(m.method)
	If jkey3('jbrowser',m.progdrv,;
			'method','method',;
			'method','.t.')
		m.method = method.method
		Show Get m.method
	Endif
Case _Curobj = Objnum(m.clients)
	If jkey3('jbrowser',m.progdrv,;
			'clients','clients',;
			'clients','.t.')
		m.clients = clients.clients
		Do rclients
	Endif
Case _Curobj = Objnum(m.via)
	If jkey3('jbrowser',m.progdrv,;
			'via','via',;
			'via, via2','.t.')
		m.via = via.via
		Show Get m.via
	Endif
Case _Curobj = Objnum(m.employee)
	If jkey3('jbrowser',m.progdrv,;
			'userid','userid',;
			'userid','.t.')
		m.employee = Userid.Userid
		Show Get m.employee
	Endif
Case _Curobj = Objnum(m.member)
	If jkey3('jbrowser',m.progdrv,;
			'member','member',;
			'member','.t.')
		m.member = member.member
		Show Get m.member
	Endif
Case _Curobj = Objnum(itemname(pointer))
	If jkey3('jbrowser',m.progdrv,;
			'modifier','content',;
			'content, content2','.t.')
		itemname(pointer) = Alltrim(itemname(pointer)) + ;
			' ' + ;
			alltrim(modifier.content)
		Show Get itemname(pointer)
	Endif
Case _Curobj = Objnum(name1(pointer))
	If jkey3('jbrowser',m.progdrv,;
			'employee','employee',;
			'firstname,lastname','.t.')
		name1(pointer) = employee.useridkey
		Show Get name1(pointer)
	Endif
Case _Curobj = Objnum(itemcode(pointer))
	If !mcheck()
		Return
	Endif
	Select opening
	Set Order To Item
	Select Catalog
	Set Rela To Upper(Alltrim(itemfile)+'.app') Into opening
	Count For Module = 'pos98'


	Do Case

	Case _Tally = 0
		=stopbox('Price Book not setup')
	Case _Tally = 1
		Locate For Module = 'pos98'
		If (m.catsearch != 'N') .And. ;
				(Upper(Catalog.catsearch) != 'N')
			If jkey3(m.pbwindow,m.progdrv,;
					'category','category2',;
					'category,category2' ,'program=['+Upper(Alltrim(Catalog.itemfile))+']')
				If jkey3(m.pbwindow,m.progdrv,;
						alltrim(Catalog.itemfile),m.sortby,;
						alltrim(m.tablefield), 'category=['+Alltrim(category.category) + ']')
					itemfile(pointer) = Catalog.itemfile
					m.oldv = Code
					Do pricekid
				Endif
			Endif
		Else
			If jkey3(m.pbwindow,m.progdrv,;
					alltrim(Catalog.itemfile),m.sortby,;
					alltrim(m.tablefield),'.t.')
				itemfile(pointer) = Catalog.itemfile
				m.oldv = Code
				Do pricekid
			Endif
		Endif

	Otherwise

		If jkey3(m.pbwindow,m.progdrv,;
				'catalog','itemfile',;
				'itemfile:H="Price Book",opening.content','module="pos98"')

			If (m.catsearch != 'N') .And. ;
					(Upper(Catalog.catsearch) != 'N')
				If jkey3(m.pbwindow,m.progdrv,;
						'category','category2',;
						'category,category2' ,'program=['+Alltrim(Catalog.itemfile)+']')
					If jkey3(m.pbwindow,m.progdrv,;
							alltrim(Catalog.itemfile),m.sortby,;
							alltrim(m.tablefield) ,'category=['+Alltrim(category.category) + ']')
						itemfile(pointer) = Catalog.itemfile
						m.oldv = Code
						Do pricekid
					Endif
				Endif
			Else
				If jkey3(m.pbwindow,m.progdrv,;
						alltrim(Catalog.itemfile),m.sortby,;
						alltrim(m.tablefield),'.t.')
					itemfile(pointer) = Catalog.itemfile
					m.oldv = Code
					Do pricekid
				Endif
			Endif

		Endif

	Endcase

	If Lastkey() != 27
		If icodecomm()
			If !m.editfield
				If m.pointer = m.arraysize
					Do i7forf
				Else
					Do forf
				Endif
			Else
				_Curobj = _Curobj + 1
			Endif
		Else
			Wait Window "item not valid"
		Endif
	Endif

Otherwise
	=stopbox('TABLE NOT AVAILABLE FOR THIS ITEM')
Endcase
Return

Procedure tablef
Private temp, N
m.temp = ''
m.oldv = ''
m.n = 1
If !scheck('pos98','tablef')
	Return
Endif
If Rdlevel() >= 5
	=stopbox('NOT ENOUGH MEMORY')
	Return
Endif
Do Case
Case _Curobj = Objnum(m.zip)
	m.oldv = m.zip
	Do m.progdrv+'zip.app' With .T.,'.t.',m.zip,'',''
	If m.oldv != m.zip
		m.city = zip.city
		m.state = zip.state
		Show Get m.city
		Show Get m.state
		Show Get m.zip
	Endif
Case _Curobj = Objnum(m.method)
	Do m.progdrv+'method.app' With .T.,'.t.',m.method,'',''
	Show Get m.method
Case _Curobj = Objnum(m.terms)
	Do m.progdrv+'terms.app' With .T.,'.t.',m.terms,'',''
	Show Get m.terms
Case _Curobj = Objnum(m.via)
	Do m.progdrv+'via.app' With .T.,'.t.',m.via,'',''
	Show Get m.via
Case _Curobj = Objnum(itemname(pointer))
	Do m.progdrv+'modifier.app' With .T.,'.t.',m.temp,'',''
	If m.oldv != m.temp
		itemname(pointer) = Alltrim(itemname(pointer)) + ;
			' ' + ;
			alltrim(modifier.content)
		Show Get itemname(pointer)
	Endif
	m.temp = ''
	Do m.progdrv+'object.app' With .T.,'.t.',m.temp,'',''
	If m.oldv != m.temp
		itemname(pointer) = Alltrim(itemname(pointer)) + ;
			' ' + ;
			alltrim(Object.content)
		Show Get itemname(pointer)
	Endif
Case _Curobj = Objnum(m.clients)
	m.oldv = m.clients
	Do m.progdrv+'clients.app' With .T.,'.t.',m.clients,'',''
	If m.oldv != m.clients
		m.clients = clients.clients
		Do rclients
	Endif
Case _Curobj = Objnum(itemcode(pointer))
	Select opening
	Set Order To Item
	Select Catalog
	Set Rela To Upper(Alltrim(itemfile)+'.app') Into opening
	If jkey3('jbrowser',m.progdrv,;
			'catalog','itemfile',;
			'itemfile:H="Price Book",opening.content','module="pos98"')
		Do savekid With 'pos98'
		Do m.progdrv+Alltrim(Catalog.itemfile)+'.app' ;
			with .T.,'.t.',m.oldv,'',''
		Do restorekid With 'pos98'
		itemcode(pointer) = m.oldv
		itemfile(pointer) = ""
		Do refreshkid
	Endif
	Select Catalog
	Set Rela To
Otherwise
	Do tablef2
Endcase
Return

Procedure tablef2
m.oldv = 'N'
Do save2
Do savekid With 'pos98'
If Empty(m.pos)
	Do m.progdrv+'payment.app' With .T.,'.t.','','',m.clients
Else
	Select payment2
	Set Order To
	Locate For itemcode = m.pos
	If Found()
		If jkey3('jbrowser',m.progdrv,;
				'payment2','itemcode',;
				'pay,split','itemcode=['+Alltrim(m.pos)+']')
			Do m.progdrv+'payment.app' With .T.,'.t.','',payment2.Payment,''
		Else
			Do m.progdrv+'payment.app' With .T.,'.t.','','',m.clients
		Endif
	Else

		m.temp = 0

		Do tablef2a

		If m.temp != 0
			If m.postdate != 'N'
				Do m.progdrv+'payment.app' With .T.,'.t.','','',m.clients, m.temp, m.orderdate
			Else
				Do m.progdrv+'payment.app' With .T.,'.t.','','',m.clients, m.temp
			Endif
		Endif
	Endif
Endif
Do restorekid With 'pos98'
Do refreshkid
*		select pos
*		set order to
*		locate for pos = m.pos
*		if found()
*			m.balance = &headfile->balance
*			show get m.balance
*		endif
Do loadkid With &headfile->pos, 'pos'
Return

Procedure tablef2a
Do Alltrim(m.progdrv) + 'askme.exe' With ;
	'n','How many splits?',m.temp
Return

Procedure Lookup
Private i, x
i = 0
x = ''

If _Curobj != Objnum(itemcode(pointer))
	If !scheck('pos98','lookup')
		Return
	Endif
Endif

If Empty(m.today)
	If !Empty(m.delimiter)
		m.keyscope = m.delimiter
	Else
		m.keyscope = '.t.'
	Endif
Else
	m.keyscope = 'orderdate = {' + Alltrim(Dtoc(m.today)) + '}'
Endif
Do Case
Case _Curobj = Objnum(m.misc)
	If jkey3('jbrowser',m.progdrv,;
			headfile,'misc',;
			m.lookufield,m.keyscope)
		Do loadkid With &headfile->pos, 'pos'
		m.oldkey = m.pos
	Endif
Case _Curobj = Objnum(itemcode(pointer))
	If !mcheck()
		Return
	Endif
	If Empty(itemcode(pointer))
		If jkey3('jbrowser',m.progdrv,;
				'lastitem','lastitem', ;
				'subtitle,title,itemcode,price width 16',;
				'clients=['+Alltrim(m.clients)+']')
			itemcode(pointer)=lastitem.itemcode
			itemfile(pointer)=lastitem.itemfile
			price(pointer)=lastitem.price
			Do sumext
		Endif
	Endif
Otherwise
	If jkey3('jbrowser',m.progdrv,;
			headfile,'clients',;
			m.lookufield,m.keyscope)
		Do loadkid With &headfile->pos, 'pos'
		m.oldkey = m.pos
	Endif
Endcase
Return

Procedure lookupf
Private temp1
If !scheck('pos98','lookupf')
	Return
Endif
If Rdlevel() >= 5
	=stopbox('NOT ENOUGH MEMORY')
	Return
Endif
Do Case
Otherwise
	Do m.progdrv+'clients.app' With .T.,'.t.',m.clients,'',''
	m.temp1 = 'Total Balance : ' + Alltrim(Str(clients.runbalance,10,2))
	If jkey3('jbrowser',m.progdrv,;
			headfile,'pos',;
			'misc:h=[No.],orderdate,total,balance',;
			'clients=['+Alltrim(m.clients)+']',;
			m.temp1)
		Do loadkid With &headfile->pos, 'pos'
		m.addmode = .F.
		m.oldkey = m.pos
	Else
		m.clients = m.oldv
	Endif
Endcase
Return

Procedure Delete
If !scheck('pos98','delete')
	Return
Endif
If !m.addmode .And. ;
		!Empty(m.pos)
********* new start
	Select Payment
	Set Order To
	Select payment2
	Set Order To
	Scan For itemcode = m.pos

		Select Payment
		Locate For Payment = payment2.Payment
		If Found()
			If lockr()
				Delete
				Unlock
			Endif
		Endif
		Select payment2
		Delete

	Endscan
	Select payment2
	Set Rela To
********* new end
	Do restoreme
	Select (m.headfile)
	Set Order To pos
	If Seek(m.pos)
		If really()
			If lockr()
				Delete
				Unlock
				Do addrun With -(m.balance)
				Select (m.linefile)
				Set Order To
				Locate For pos=m.pos
				Do While Found()
					Delete
					Continue
				Enddo
				Do Init
			Else
				=stopbox('CANNOT DELETE RECORD')
			Endif
		Endif
	Else
		=stopbox('RECORD NOT FOUND')
	Endif
Else
	=stopbox('EMPTY FORM')
Endif
Return

Procedure tabled
If !scheck('pos98','tabled')
	Return
Endif
Do Case
Otherwise
***new start
	If Empty(m.pos)
		=stopbox('You cannot void an empty check')
		Return
	Endif
	m.oldv = ''
	Select fob From fob Into Array b
	Do m.progdrv + 'apick.exe' With ;
		'Reason for cancel',b,m.oldv
	m.oldv = Alltrim(m.oldv)

	If !Empty(m.oldv)
		=okbox('Please enter a reason in detail')

		Select (m.headfile)
		Set Order To pos
		If Seek(m.pos)
			Do Alltrim(m.progdrv)+'notepad.exe' With ;
				m.headfile, 'notepad'
		Endif
		do tabled2
		Do loadkid With m.pos, 'pos'
	Endif

***new end
Endcase
Return

procedure tabled2
		Select Payment
		Set Order To Payment
		Select payment2
		Set Rela To Payment Into Payment
		Set Order To
		Scan For itemcode = m.pos
			Select Payment
			If lockr()
				Replace amount With amount - payment2.pay
				Unlock
			Endif
			Select payment2
			Delete
		Endscan
		Select payment2
		Set Rela To
		If lockf()
			Delete All For itemcode = m.pos
			Unlock
		Endif
		Select pos
		Set Order To pos
		If Seek(m.pos)
			If lockr()
				Replace balance With 0
				Replace via With m.oldv
				Replace subtotal With 0
				Replace salestax With 0
				Replace Total With 0

				If m.postdate = 'N'
					Replace post With Date()
				Else
					Replace post With pos.orderdate
				Endif

				Unlock
			Endif
			m.balance = 0
			m.via = m.oldv
			Show Get m.balance
			Show Get m.via
		Endif
		Select (m.tempalias)
		Replace All shipped With 0
		Replace All Extended With 0
		Do linesave
return


Procedure Save
If !scheck('pos98','save')
	Return
Endif

If !allvalid()
	Return
Endif

If !Empty(m.greeting)
	Do Alltrim(m.progdrv) + 'display.app' ;
		with .F.,'Amt Due : ' + ;
		str(m.payment,10,2) + ;
		'Change  : ' + Str(m.change,10,2)
Endif

m.oldv = ''

If m.promptr1 = 'N'
	If m.payment > 0
		m.oldv = 'Y'
	Else
		m.oldv = 'N'
	Endif
Else
	If m.forceyes = 'N'
		m.oldv = alert('?','yNc',-1,-1,;
			'Print Receipt : ' + ;
			alltrim(m.method), ;
			'Pay : ' + Alltrim(Str(m.payment,10,2)),  ;
			'Change : ' + Alltrim(Str(m.change,10,2)), ;
			'Tips : ' + Alltrim(Str(m.surcharge,10,2)) )
	Else
		m.oldv = alert('?','Ync',-1,-1,;
			'Print Receipt : ' + ;
			alltrim(m.method), ;
			'Pay : ' + Alltrim(Str(m.payment,10,2)),  ;
			'Change : ' + Alltrim(Str(m.change,10,2)), ;
			'Tips : ' + Alltrim(Str(m.surcharge,10,2)) )
	Endif
	If m.oldv = 'Y'
		If m.autoclear != 'N'
			If Left(m.clients,1) != '*'
				If Alltrim(m.via) = Alltrim(m.initvia)
					m.clients = '*' + Alltrim(m.clients)
				Endif
			Endif
		Endif
	Endif
Endif

If m.oldv = 'C'
	Return
Endif

Do saveclients
Do save2
m.addmode = .f.
If m.lookupmode
	m.lreturn = m.pos
	Clear Read
Else
	if m.change > 0
		wait window 'Change : ' + Str(m.change,10,2)
	else
		Wait Window

	endif
	Do Init
Endif
Return

Procedure save2

Private temp1xxx, savemethod

m.savemethod = alphanum(m.method,'Aa')
if left(m.method,1) = m.splitkey
  m.method = splitkey
endif

temp1xxx = 0.00

If m.clients = m.automode
	Select Global
	Set Order To
	Locate For Program='pos98' .And. ;
		function = 'counter1'
	If Found()
		If lockr()
			m.clients = Alltrim(Str(Val(Global.setting)))

			If Val(m.clients) > m.autohigh
				m.clients = Alltrim(Str(m.autolow))
				Replace Global.setting With ;
					alltrim(Str(Val(m.clients)+1))
			Else
				If Val(m.clients) < m.autolow
					m.clients = Alltrim(Str(m.autolow))
					Replace Global.setting With ;
						alltrim(Str(Val(m.clients)+1))
				Else
					Replace Global.setting With ;
						alltrim(Str(Val(Global.setting)+1))
				Endif
			Endif
			Unlock
		Endif
	Else
		=stopbox('Error locating available slot for customer')
		Return
	Endif
Endif

Select (m.headfile)

If m.addmode

	If lockf()
		If Empty(m.pos)

			If m.random != 'N'
				m.pos=getts( headfile, ;
					'pos', ;
					'getno')
			Else
				m.pos=getnextno( headfile, ;
					'pos', ;
					'getno')
			Endif

			If Empty(m.misc)
				If m.stampcheck != 'N'
					if alltrim(m.via) $ m.stampcheck
	Select Global
	Set Order To
	Locate For Program='pos98' .And. ;
		function = 'counter2'
	If Found()
		If lockr()
			m.misc = Alltrim(Str(Val(Global.setting)))

			If Val(m.misc) > m.autohigh
				m.misc = Alltrim(Str(m.autolow))
				Replace Global.setting With ;
					alltrim(Str(Val(m.misc)+1))
			Else
				If Val(m.misc) < m.autolow
					m.misc = Alltrim(Str(m.autolow))
					Replace Global.setting With ;
						alltrim(Str(Val(m.misc)+1))
				Else
					Replace Global.setting With ;
						alltrim(Str(Val(Global.setting)+1))
				Endif
			Endif
			Unlock
		Endif
	Endif
	Select (m.headfile)

					else
						m.misc = Right(Alltrim(m.pos),8)
					endif
				Endif
			Endif
		Else
			Set Order To pos
			If Seek(m.pos)
				=stopbox('Cannot save duplicate order')
				Unlock
				Return
			Endif
		Endif
		m.balance = m.balance - m.payment + m.change
		m.fob = Time()
		Append Blank
		Gather Memvar Memo
		Unlock
		Do linesave
		Do addrun With m.balance
	Else
		=stopbox('ERROR SAVING FILE')
	Endif
Else
	If Empty(m.pos)
		=stopbox('KEYCODE INVALID')
		_Curobj = Objnum(m.pos)
		Return
	Endif
	Set Order To pos
	If Seek(m.pos)
		If m.oldkey != m.pos
			If alert('STOP','Yn',-1,-1,;
					"Record " + ;
					alltrim(m.pos)+;
					" already exists",;
					"Do you want to overwrite it?") = 'N'
				Return
			Endif
		Endif

*		m.balance = m.balance - m.payment + m.change + ;
*								(m.total - &headfile->total)
*new start
*
*	ever since you add the balance runtime update
* to the ctotal, you take the difference
* m.total - &headfile->total out because you do
* it everytime you change the total from the
* procedure ctotal instantly.
*
*
		m.balance = m.balance - m.payment + m.change
		Do changerun With pos.balance, m.balance

		Do linesave

		Select pos
		If lockr()
			Gather Memvar Memo
			Unlock
		Endif
	Else
		If alert('CAUTION','Yn',-1,-1,;
				'SAVE AS NEW RECORD') = 'Y'
			If lockf()
				Append Blank
				Gather Memvar Memo
				Unlock
				Do linesave
			Else
				=stopbox('RECORD SAVING ERROR')
			Endif
		Endif
	Endif
Endif


If m.payment > 0 .or. m.surcharge > 0
	Select Payment
	Set Order To
	If lockf()
		m.temp1=getts('payment', ;
			'payment', ;
			'getno')
		Append Blank
		Replace Payment With m.temp1
		Replace clients With m.clients

		If m.postdate = 'N'
			Replace Date With Date()
		Else
			Replace Date With pos.orderdate
		Endif

		Replace amount With (m.payment - m.change)
		Replace credit With 0
		Unlock
		Select payment2
		If lockf()
			Append Blank
			Replace Payment With m.temp1
			Replace itemcode With m.pos
			Replace itemfile With headfile
			Replace lno With 1
			Replace pay With (m.payment - m.change)
			Replace Split With m.savemethod
			Replace itemname With m.cardno
			If m.tipsmode != 'N'
				Replace surcharge2 With m.surcharge
			Endif
			Unlock
		Endif
	Endif
	Select pos
	If m.balance <= 0
		If lockr()
			If m.postdate = 'N'
				Replace post With Date()
			Else
				Replace post With pos.orderdate
			Endif
			If m.tipsmode != 'N'
				Replace surcharge With 0
				Replace chargerate With 0
			Endif
			Unlock
		Endif


		Select member
		Locate For member = m.member
		If Found()
			If lockr()
				Replace member.control1 With m.membercredit
				If m.creditrate > 0
					m.temp1xxx = m.subtotal/100*m.creditrate
				Else
					m.temp1xxx = m.subtotal
				Endif
				If !Empty(m.creditterm)
					If Alltrim(m.terms) != m.creditterm
						m.temp1xxx = 0
					Endif
					If !(Alltrim(m.via) $ m.creditvia)
						m.temp1xxx = 0
					Endif
					Replace member.control1 With member.control1 + m.temp1xxx
				Else
					Replace member.control1 With member.control1 + m.temp1xxx
				Endif
				Unlock
			Endif
		Endif
	Else
		Do rdue
	Endif
Endif

Do finalwork

Return

Procedure saveclients

if m.clients=m.automode
	return
endif

Select clients
Set Order To clients
m.clients = Alltrim(m.clients)

Select area2
Locate For itemcode = m.clients
If !Found()
	Select clients
	If Seek(m.clients)
		If lockr()
			Do sclient2
			Unlock
		Endif
	Else
		If lockf()
			Append Blank
			Do sclient2
			Unlock
		Endif
	Endif
Endif

Select member
Locate For member = m.member
If !Found()
	If lockf()
		Append Blank
		Replace member With m.member
		Unlock
	Endif
	Select pos
	Replace notepad With '*' + notepad
Endif
Return

Procedure sclient2
Select clients
Replace firstname With m.firstname, ;
	lastname With m.lastname, ;
	address1 With m.address1, ;
	address2 With m.address2, ;
	address3 With m.address3, ;
	city With m.city, ;
	state With m.state, ;
	zip With m.zip, ;
	zip4 With m.zip4, ;
	company With m.company, ;
	clients With m.clients, ;
	approved With m.approved, ;
	member With m.member
Return

Procedure finalwork

private reprint
reprint = .f.

Do holdit
Do receipt1

If Type('oldv') = 'C'
	If m.oldv = 'C'
		Return
	Endif
Endif

If !Empty(m.savecall)
	If File(Alltrim(m.progdrv)+m.savecall+'.app')
*	do alltrim(m.progdrv) + m.savecall;
*  	with .f.,'module="pos98"','','','pos98'
		=okbox('Under construction')
	Else
		=stopbox('External saving module not found')
	Endif
Endif

Do receipt2

If m.addmode
	Do receipt3
else
	if m.reprint
		Do receipt3
	endif
Endif

Return

Function allvalid
If m.warning!='N'
	If Empty(itemcode(1))
		If alert('STOP','yN',-1,-1,;
				"No item on this order", ;
				"Do you want to save it?") = 'N'
			Return .F.
		Endif
	Endif
Endif
Return

Procedure loadtable
If !OpenTable(m.datadrv,'userid')
	Cancel
Endif
If !OpenTable(m.datadrv,'scheck')
	Cancel
Endif
If !OpenTable(m.datadrv,'system')
	Cancel
Endif
If !OpenTable('.\','local')
	Cancel
Endif

* If !OpenTable(m.datadrv,'global')
* 	Cancel
* Endif

If !OpenTable('.\','opening')
	Cancel
Endif
If !OpenTable(m.datadrv,'via')
	Cancel
Endif
If !OpenTable(m.datadrv,'fob')
	Cancel
Endif
If !OpenTable(m.datadrv,headfile)
	Cancel
Endif
If !OpenTable(m.datadrv,m.linefile)
	Cancel
Endif
If !OpenTable(m.datadrv,'category')
	Cancel
Endif
If !OpenTable(m.datadrv,'catalog')
	Cancel
Endif
If !OpenTable(m.datadrv,'clients')
	Cancel
Endif
If !OpenTable(m.datadrv,'terms')
	Cancel
Endif
If !OpenTable(m.datadrv,m.headfile)
	Cancel
Endif
If !OpenTable(m.datadrv,m.linefile)
	Cancel
Endif
If !OpenTable(m.datadrv,'payment')
	Cancel
Endif
If !OpenTable(m.datadrv,'payment2')
	Cancel
Endif
If !OpenTable(m.datadrv,'method')
	Cancel
Endif
If !OpenTable(m.datadrv,'employee')
	Cancel
Endif
If !OpenTable(m.datadrv,'modifier')
	Cancel
Endif
If !OpenTable(m.datadrv,'object')
	Cancel
Endif
If !OpenTable(m.datadrv,'object2')
	Cancel
Endif

If !OpenTable(m.datadrv,'zip')
	Cancel
Endif
If !OpenTable(m.datadrv,'whatcard')
	Cancel
Endif
If !OpenTable(m.datadrv,'option')
	Cancel
Endif
If !OpenTable(m.datadrv,'profile2')
	Cancel
Endif
If !OpenTable(m.datadrv,'profile3')
	Cancel
Endif
If !OpenTable(m.datadrv,'area')
	Cancel
Endif
If !OpenTable(m.datadrv,'area2')
	Cancel
Endif
If !OpenTable(m.datadrv,'timelog')
	Cancel
Endif
If !OpenTable(m.datadrv,'break')
	Cancel
Endif
If !OpenTable(m.datadrv,'lastitem')
	Cancel
Endif
If !OpenTable(m.datadrv,'ownbook')
	Cancel
Endif
If !OpenTable(m.datadrv,'member')
	Cancel
Endif

Select Catalog
Scan For Module='pos98'
	If !Empty(Catalog.itemfile)
		If !OpenTable(m.datadrv,Catalog.itemfile)
			=okbox('Please run the catalog selection program')
			Return To Master
		Endif
	Endif
Endscan
Scan For Module='pos98'
	If !Empty(Catalog.profile)
		If !OpenTable(m.datadrv,Catalog.profile)
			=okbox('Profile error - '+Alltrim(Catalog.profile))
			Return To Master
		Endif
	Endif
Endscan
Return

Procedure plocal
If !scheck('pos98','plocal')
	Return
Endif

If Rdlevel() >= 5
	=stopbox('NOT ENOUGH MEMORY')
	Return
Endif

Do m.progdrv + 'local.exe' With .F., ;
	'program="pos98"', ;
	'','pos98',''
Return

Procedure pglobal
If !scheck('pos98','pglobal')
	Return
Endif

If Rdlevel() >= 5
	=stopbox('NOT ENOUGH MEMORY')
	Return
Endif
Do m.progdrv + 'global.exe' With .F., ;
	'program="pos98"', ;
	'','pos98',''
Return

Procedure jump
Do Case
Case _Curobj >= firstkid() .And. _Curobj <= lastkid()
	_Curobj = Objnum(m.payment)
Case _Curobj = Objnum(m.payment)
	_Curobj = Objnum(m.method)
Case _Curobj = Objnum(m.method)
	_Curobj = Objnum(m.employee)
Case _Curobj = Objnum(m.employee)
	_Curobj = Objnum(m.misc)
Otherwise
	_Curobj = firstkid()
Endcase
Return

Procedure ipref
If !scheck('pos98','pref')
	Return
Endif
If Rdlevel() >= 5
	=stopbox('NOT ENOUGH MEMORY')
	Return
Endif
Do m.progdrv + 'pref.exe' With .F., ;
	'program="pos98"', ;
	"","",'pos98'
Return

Procedure isystem
If !scheck('pos98','system')
	Return
Endif
If Rdlevel() >= 5
	=stopbox('NOT ENOUGH MEMORY')
	Return
Endif
Do m.progdrv + 'system.exe' With .F., ;
	'program="pos98"', ;
	"","",'pos98'
Return

Procedure inotepad
If !scheck('pos98','notepad')
	Return
Endif
Do Case
Case _Curobj >= firstkid() .And. ;
		_curobj <= lastkid()
	Select (m.tempalias)
	Set Order To lno
	If Seek(lno(pointer))
		Do Alltrim(m.progdrv)+'notepad.exe' With ;
			m.tempalias, 'itemname'
		itemname(pointer) = itemname
	Endif
Otherwise
	If !m.addmode
		Select (m.headfile)
		Set Order To
		Locate For pos = m.pos
		If Found()
			Do Alltrim(m.progdrv)+'notepad.exe' With ;
				headfile, 'notepad'
			m.notepad = &headfile->notepad
			Show Get m.notepad
		Endif
	Endif
Endcase
Return

Procedure lookagain
Private N, vp, temp, n2
m.temp = 0
m.vp = 1
m.n = 1
m.n2 = 0

If _Curobj >= firstkid() .And. ;
		_curobj < (lastkid() + m.itemlen)

	If !Empty(itemcode(pointer))
		m.vp = m.pointer
	Else
		If pointer > 1
			m.vp = m.pointer-1
		Else
			Return
		Endif
	Endif

	Do While .T.
		If jkey3('jbrowser',m.progdrv,;
				'modifier','content',;
				'content, content2','.t.')
			If !Empty(m.exitkey)
				If modifier.content = m.exitkey
					Exit
				Endif
			Endif
			If !Empty(m.editkey)
				If modifier.content = m.editkey
					Do lookagain4
					Exit
				Endif
			Endif
			If !Empty(m.infokey)
				If modifier.content = m.infokey
					Do line2.spr
					Do lookagain3
					Exit
				Endif
			Endif
			If !Empty(m.clearkey)
				If modifier.content = m.clearkey
					itemname(vp) = ''
					laborhour(vp) = 0
					laborcost(vp) = 0
					Do lookagain3
					Exit
				Endif
			Endif
			If m.exitkey $ modifier.content2
				itemname(vp) = Alltrim(itemname(vp)) + ;
					' ' + ;
					alltrim(modifier.content)
				itemname(vp) = Alltrim(itemname(vp))
				Show Get itemname(vp)
				Loop
			Endif

			If jkey3('jbrowser',m.progdrv,;
					'object','content',;
					'object, content, content2 width 15','.t.')
				itemname(vp) = Alltrim(itemname(vp)) + ;
					' ' + ;
					alltrim(modifier.content) + ' ' + ;
					alltrim(Object.content) + ' ' + ;
					alltrim(modifier.content2) + ;
					alltrim(Object.content2)
				itemname(vp) = Alltrim(itemname(vp))
				Show Get itemname(vp)
				If Alltrim(modifier.content) $ m.addkey
					Do lookagain2
				Endif
				Do lookagain3
			Endif
		Else
			Exit
		Endif
	Enddo
Endif
Return

Procedure lookagain3
m.temp = m.pointer
m.pointer = m.vp
Do vtempsave
Do sumext
m.pointer = m.temp
Return

Procedure lookagain4
m.temp = m.pointer
m.pointer = m.vp
Do inotepad
m.pointer = m.temp
Return

Procedure lookagain2
private n2
m.n2 = 0
if object.askunit
	Do Alltrim(m.progdrv) + 'askme.exe' With ;
		'n','How many units for ' + ;
		alltrim(itemname(vp)), m.n
endif

if object.askprice
	Do Alltrim(m.progdrv) + 'askme.exe' With ;
		'n','How much ' + ;
		alltrim(itemname(vp)), m.n2
endif

If Object.price > 0
	If m.n > 1
		itemname(vp) = itemname(vp) + ;
			'-' + Alltrim(Str(m.n))
	Endif
Endif

	laborhour(vp) = m.n
	laborcost(vp) = m.n2
	if upper(object.taxable) = 'N'
		labortax(vp) = 'N'
	endif


Return

Procedure preremote
Return

Procedure postremote
Return

Procedure itemtable
Do Alltrim(m.progdrv) + 'catalog.app' ;
	with .F.,'module="pos98"','','','pos98'
Select Catalog
Scan For Module='pos98'
	If !Empty(Catalog.itemfile)
		=OpenTable(m.datadrv,Catalog.itemfile)
	Endif
Endscan
Return

Function icodecomm
itemcode(pointer) = Alltrim(itemcode(pointer))
If m.oldv != itemcode(pointer)
	If !Empty(returndate(pointer))
		If !scheck('pos98','edititem')
			itemcode(pointer) = m.oldv
			Show Get itemcode(pointer)
			Return .F.
		Endif
	Endif
Endif

If m.cashdirect != 'N'
	If '.' $ itemcode(pointer)
		itemfile(pointer) = ''
		shipped(pointer) = 1
		price(pointer) = Val(itemcode(pointer))
		itemcode(pointer) = m.manualtext
		Do sumext
		Do tempsave
		Do ctotal
		Show Gets
		Return
	Endif
Endif

If Empty(itemcode[pointer])
	If lno(pointer) != m.maxno
		=stopbox('INVALID ITEM')
		Return .F.
	Endif
Else
	If m.oldv != itemcode[pointer]
		itemfile[pointer] = ''
	Endif
	If Empty(itemfile[pointer])
		Do itemfind
		Do sumext2
	Endif
Endif
If !Empty(itemfile[pointer])
	Do Alltrim(m.progdrv) + ;
		alltrim(itemfile(pointer))+'.app' With .F.
Endif
Do sumext
Do tempsave
Do ctotal
Do picklang2
Show Gets
Return

Procedure itemfind
Declare b(1,2)
b(1,1) = ''
b(1,2) = ''
Private i, lastfind, a
m.lastfind = ''
m.itemfindx = .T.
m.i = 0
m.a = 'Please choose from the following price book'
Select Catalog
Set Order To
Select opening
Set Order To Item
Select Catalog
Set Rela To
Set Rela To Upper(Alltrim(itemfile)+'.app') Into opening
Scan For Module = 'pos98'
	Select Alltrim(Catalog.itemfile)
	Set Order To Code
	If Seek(itemcode[pointer])
		i = i + 1
		m.lastfind = Alltrim(Catalog.itemfile)+;
			' - ' + ;
			alltrim(opening.content)
		Declare b(i)
		b(i) = m.lastfind
	Endif
Endscan
Select Catalog
Set Rela To
Do Case
Case m.i > 1
	Select profile3
	Set Order To
	Locate For via = m.via
	Set Exact Off
	If Found() .And. ;
			ascan(b,Alltrim(Upper(profile3.itemfile))) != 0
		m.lastfind = Alltrim(profile3.itemfile)
	Else

		m.lastfind = ''
		If Empty(m.lastfind)
			Do m.progdrv + 'apick.exe' With a,b,m.lastfind
			m.lastfind = Left(m.lastfind,At(' ',m.lastfind)-1)
		Endif

	Endif
	Set Exact On

	If !Empty(m.lastfind)
		itemfile[pointer] = m.lastfind
		Select (m.lastfind)
		Set Order To Code
		If Seek(itemcode[pointer])
			Do pricekid
		Else
			=stopbox('CATALOG OPENING ERROR')
		Endif
	Endif



Case m.i = 1
	m.lastfind = Left(m.lastfind,At(' ',m.lastfind)-1)
	itemfile[pointer] = m.lastfind
	Select (m.lastfind)
	Set Order To Code
	If Seek(itemcode[pointer])
		Do pricekid
	Else
		=stopbox('CATALOG OPENING ERROR')
	Endif
Otherwise
	itemfile[pointer] = ''
	m.itemfindx = .F.
	If !m.warning='N'
		=stopbox('ITEM CODE NOT FOUND')
	Endif
Endcase
Return

Procedure sumext
Private temp
m.temp = 0
If m.min1 != 'N'
	If shipped(pointer) < 1
		=stopbox('Quantity reset to 1')
		shipped(pointer) = 1
	Endif
Endif
If shipped(pointer) < 0
	shipped(pointer) = 0
	Do sumext2a
	If m.temp > 0
		shipped(pointer) = m.temp
	Endif
Endif
If m.discbyamt != 'N'
	Extended[pointer] = shipped[pointer] * ;
		price[pointer] + ;
		laborcost(pointer) * ;
		laborhour(pointer) - ;
		linedisc(pointer)

Else
	Extended[pointer] = (shipped[pointer] * ;
		price[pointer]  + ;
		laborcost(pointer) * ;
		laborhour(pointer)) * ;
		(100-linedisc[pointer]) / 100
Endif
Show Get Extended[pointer]
Do ctotal
Do vtempsave
Return

Procedure sumext2
Return

Procedure sumext2a
Do Alltrim(m.progdrv) + 'askme.exe' With ;
	'n','Quantity?',m.temp
Return


procedure ctotal0

private xxx, xxxfile

m.xxxfile = catalog.itemfile
			if m.discbyamt != 'N'
				replace extended with ;
					shipped * price + ;
					laborcost * ;
					laborhour - ;
					linedisc
			else
	  			replace extended with ;
  					(shipped*price + laborcost*laborhour) * ;
					(100-linedisc) / 100
			endif

			if !empty(&xxxfile->sort)
			  replace performby with &xxxfile->sort
			else
			  replace performby with &xxxfile->category
			endif

			select profile2
			set order to
			if m.sort2bycat = 'N'
				locate for via = alltrim(m.via) .and. ;
					itemfile = xxxfile
			else
				locate for via = alltrim(m.via) .and. ;
					itemfile = &xxxfile->category
			endif

			select (m.tempalias)
			if found()
				replace sort1 with profile2.sort2
			endif
return

Procedure ctotal

Private subtax, subnotax, subtaxl, subnotaxl, ;
	oldtotal
m.oldtotal = m.total

*new start above 3 line

m.subtax = 0
m.subnotax = 0
m.subtaxl = 0
m.subnotaxl = 0
Select (m.tempalias)

If m.discbyamt != 'N'
	Sum shipped*price-linedisc ;
		for Upper(parttax)!='N' ;
		to m.subtax

	Sum shipped*price-linedisc ;
		for Upper(parttax)='N' ;
		to m.subnotax

	Sum laborhour*laborcost-linedisc ;
		for Upper(labortax)!='N' ;
		to m.subtaxl

	Sum laborhour*laborcost-linedisc ;
		for Upper(labortax)='N' ;
		to m.subnotaxl
Else
	Sum shipped*price*(100-linedisc)/100 ;
		for Upper(parttax)!='N' ;
		to m.subtax

	Sum shipped*price*(100-linedisc)/100 ;
		for Upper(parttax)='N' ;
		to m.subnotax

	Sum laborhour*laborcost*(100-linedisc)/100 ;
		for Upper(labortax)!='N' ;
		to m.subtaxl

	Sum laborhour*laborcost*(100-linedisc)/100 ;
		for Upper(labortax)='N' ;
		to m.subnotaxl
Endif

m.subtax = m.subtax + m.subtaxl
m.subnotax = m.subnotax + m.subnotaxl
m.nettotal = m.subtax + m.subnotax

m.subtax = Round(m.subtax * (100-m.discount)/100,2)
m.subnotax = Round(m.subnotax * (100-m.discount)/100,2)
m.subtotal = m.subtax + m.subnotax

If m.roundcents = 'N'
	m.salestax = Round(m.subtax * m.taxrate / 100,2)
Else
	If (m.subtax * m.taxrate / 100) - ;
			round(m.subtax * m.taxrate / 100,2) ;
			> 0
		m.salestax = Round(m.subtax * m.taxrate / 100,2) + 0.01
	Else
		m.salestax = Round(m.subtax * m.taxrate / 100,2)
	Endif
Endif

m.total = m.subtotal + m.salestax

*new start here
If m.oldtotal != m.total
	m.balance = m.balance - (m.oldtotal - m.total)
	Show Get m.balance
Endif
*end new start


m.surcharge = m.subtotal * m.chargerate / 100
m.afteroff = m.total

Show Get m.surcharge
Show Get m.subtotal
Show Get m.salestax
Show Get m.total
Show Get m.afteroff
Show Get m.discount

Do cdisplay
Return

Procedure ctotal2
Private temptax, ;
	tempsub, ;
	temptotal, ;
	tempb

m.tempb = m.balance
m.temptotal = m.total
m.discount = 0
Do ctotal
m.temptax = 0
m.tempsub = 0
m.temptax = m.temptotal / (100 + m.taxrate) * m.taxrate
m.tempsub = m.temptotal - m.temptax
m.discount = (m.subtotal - m.tempsub) / m.subtotal * 100
Do ctotal
If m.oldv != m.total
	m.balance = m.tempb - (m.oldv - m.total)
	Show Get m.balance
Endif
Return

Procedure upkid
Parameter What
lno[what] = &tempalias->lno
itemcode[what] = &tempalias->itemcode
itemfile[what] = &tempalias->itemfile
Title(What) = &tempalias->Title
tracking(What) = &tempalias->tracking
sort1[what] = &tempalias->sort1
sort0[what] = &tempalias->sort0
subtitle(What) = &tempalias->subtitle
itemname[what] = &tempalias->itemname
shipped[what] = &tempalias->shipped
price[what] = &tempalias->price
linedisc[what] = &tempalias->linedisc
parttax[what] = &tempalias->parttax
laborcost(What) = &tempalias->laborcost
laborhour(What) = &tempalias->laborhour
labortax(What) = &tempalias->labortax
performby(What) = &tempalias->performby
Extended(What) = &tempalias->Extended
Link(What) = &tempalias->Link
keylink(What) = &tempalias->keylink
CheckIn(What) = &tempalias->CheckIn
commission(What) = &tempalias->commission
minprice(What) = &tempalias->minprice
returndate(What) = &tempalias->returndate
cost(What) = &tempalias->cost
unit0(What) = &tempalias->unit0
name1(What) = &tempalias->name1
Return

Procedure downkid
Parameter What
Replace itemfile With itemfile[what]
Replace itemcode With itemcode[what]
Replace itemname With itemname[what]
Replace Title With Title(What)
Replace tracking With tracking(What)
Replace sort1 With sort1[what]
Replace sort0 With sort0[what]
Replace subtitle With subtitle(What)
Replace shipped With shipped[what]
Replace price With price[what]
Replace linedisc With linedisc[what]
Replace parttax With parttax[what]
Replace labortax With labortax(What)
Replace laborhour With laborhour(What)
Replace laborcost With laborcost(What)
Replace performby With performby(What)
Replace Extended With Extended(What)
Replace Link With Link(What)
Replace keylink With keylink(What)
Replace CheckIn With CheckIn(What)
Replace unit0 With unit0(What)
Replace commission With commission(What)
Replace name1 With name1(What)
Replace minprice With minprice(What)
Replace cost With cost(What)
Replace returndate With returndate(What)
Return

Procedure hidekid
Parameter What
Show Get itemcode[what] Disable
Show Get shipped[what] Disable
Show Get price[what] Disable
Show Get parttax(What) Disable
Show Get laborhour(What) Disable
Show Get laborcost(What) Disable
Show Get performby(What) Disable
Show Get linedisc(What) Disable
Show Get Extended[what] Disable
Show Get itemname[what] Disable
Show Get Title(What) Disable
Show Get tracking(What) Disable
Show Get sort1[what] Disable
Show Get sort0[what] Disable
Show Get subtitle(What) Disable
Show Get CheckIn(What) Disable
Show Get commission(What) Disable
Show Get name1(What) Disable
Show Get cost(What) Disable
Show Get minprice(What)Disable
Show Get returndate(What) Disable
Show Get unit0(What) Disable
Show Get lno(What) Disable
Return

Procedure replacekid
Parameter From,To
itemfile[from] = itemfile[to]
itemcode[from] = itemcode[to]
shipped[from] = shipped[to]
price[from] = price[to]
linedisc[from] = linedisc[to]
Extended[from] = Extended[to]
Title(From) = Title(To)
tracking(From) = tracking(To)
sort1[from] = sort1[to]
sort0[from] = sort0[to]
subtitle(From) = subtitle(To)
itemname[from] = itemname[to]
lno[from] = lno[to]
parttax(From) = parttax(To)
labortax(From) = labortax(To)
performby(From) = performby(To)
Link(From) = Link(To)
keylink(From) = keylink(To)
CheckIn(From) = CheckIn(To)
unit0(From) = unit0(To)
commission(From) = commission(To)
name1(From) = name1(To)
minprice(From) = minprice(To)
cost(From) = cost(To)
returndate(From) = returndate(To)
Return

Procedure showkid
Parameter What
Show Get itemcode[what] Enable
Show Get shipped[what] Enable
Show Get price[what] Enable
Show Get linedisc[what] Enable
Show Get itemname[what] Enable
Show Get Extended[what] Enable
Show Get parttax[what] Enable
Show Get laborcost(What) Enable
Show Get laborhour(What) Enable
Show Get labortax(What) Enable
Show Get Title(What) Enable
Show Get tracking(What) Enable
Show Get sort1[what] Enable
Show Get sort0[what] Enable
Show Get subtitle(What) Enable
Show Get performby(What) Enable
Show Get CheckIn(What) Enable
Show Get unit0(What) Enable
Show Get returndate(What) Enable
Show Get commission(What) Enable
Show Get name1(What) Enable
Show Get minprice(What) Enable
Show Get cost(What) Enable

If m._lno != 'N'
	Show Get lno(What) Enable
Endif
Return

Procedure emptykid
Parameter What
lno[what] = 0
itemfile[what]= ' '
itemcode[what]= ''
Title(What) = ' '
tracking(What) = ''
sort1[what] = ''
sort0[what] = ''
subtitle(What) = ' '
itemname[what]= ' '
price[what] = 0
shipped[what] = 1.0
linedisc[what] = 0
Extended[what] = 0
parttax[what] = ' '
labortax(What) = ''
laborcost(What) = 0
laborhour(What) = 0
performby(What) = ''
Link(What) = ''
keylink(What) = ''
CheckIn(What) = {//}
returndate(What) = {//}
commission(What) = 0
name1(What) = m.login
minprice(What) = 0
cost(What) = 0
unit0(What) = ''
Return

Procedure pricekid
cost(pointer) = cost
itemcode(pointer) = Code
itemname(pointer) = detail
Title(pointer) = Title
subtitle(pointer) = subtitle
If fieldfound('special')
	If m.terms = m.after
		price(pointer) = price
		If fieldfound('unit1')
			unit0(pointer) = unit1
		Endif
	Else
		price(pointer) = Special
		If fieldfound('unit2')
			unit0(pointer) = unit2
		Endif
	Endif
Else
	price(pointer) = price
	If fieldfound('unit1')
		unit0(pointer) = unit1
	Endif
Endif

If fieldfound('comm')
	commission(pointer) = Comm
Endif
If fieldfound('minprice')
	minprice(pointer) = minprice
Endif

performby(pointer) = category
laborcost(pointer) = laborcost
laborhour(pointer) = laborhour
labortax(pointer) = labortax
parttax(pointer) = parttax
keylink(pointer) = ''
Link(pointer) = ''
CheckIn(pointer) = {//}
returndate(pointer) = {//}
If minorder != 0
	shipped(pointer) = minorder
Endif

Select profile2
Set Order To
If m.sort2bycat = 'N'
	Locate For via = Alltrim(m.via) .And. ;
		itemfile = itemfile(pointer)
Else
	Locate For via = Alltrim(m.via) .And. ;
		itemfile = performby(pointer)
Endif

If Found()
	sort1[pointer] = profile2.sort2
Endif

Select Option
Set Order To
Locate For Upper(booklink) = Upper(itemfile(pointer)) .And. ;
	iclink = Alltrim(itemcode(pointer))
If Found()
	Select Distinct sort3 From Option Where ;
		iclink Like Alltrim(itemcode(pointer)) .And. ;
		upper(booklink)=Alltrim(itemfile(pointer)) ;
		into Array b

	For i = 1 To Alen(b)
		If jkey3('jbrowser',m.progdrv,;
				'option','howto',;
				'howto, subtitle','iclink="'+Alltrim(itemcode(pointer))+'"'+;
				' and ' + ;
				'upper(booklink)=['+Upper(Alltrim(itemfile(pointer)))+;
				'] and sort3=b['+Alltrim(Str(i))+']', ;
				'Choice ' + Alltrim(b(i)) + ' : ')
			If m.longitem != 'N'
				itemname(pointer) = Alltrim(Option.howto) + ;
									' ' + ;
									alltrim(option.subtitle) + ;
									' ' + itemname(pointer)
				Show Get Title(pointer)
				Show Get itemname(pointer)
			Else
				Title(pointer) =  Alltrim(Option.howto) + ' ' + ;
					alltrim(Title(pointer))
				subtitle(pointer) = Alltrim(Option.subtitle) + ' ' + ;
					alltrim(subtitle(pointer))
			Endif
			If Option.setprice
				Do pricekid3
			Else
				Do pricekid2
			Endif
		Endif
	Endfor
Else
	Do pricekid2
Endif

Do pricekid5

Return

Procedure pricekid5
*subclass
Return

Procedure pricekid3
If m.terms = m.after
	price(pointer) = Option.howmuch
Else
	price(pointer) = Option.Special
Endif
If Option.howmuch != Option.Special
	If m.after != m.before
		If !(Alltrim(m.terms) $ itemname(pointer))
			itemname(pointer) = Alltrim(m.terms) + ;
				'/' + ;
				alltrim(itemname(pointer))
		Endif
	Endif
Endif
Return

Procedure pricekid2
If Used(Alltrim(itemfile(pointer)))
	Select Alltrim(itemfile(pointer))
	If fieldfound('special')
		If Special != price
			If m.after != m.before
				If !(Alltrim(m.terms) $ itemname(pointer))
					itemname(pointer) = Alltrim(m.terms) + ;
						'/' + ;
						alltrim(itemname(pointer))
				Endif
			Endif
		Endif
	Endif
Endif
Return

Procedure linesave
Private lastitem
m.lastitem=''
If !m.addmode
	Do restoreme
Endif
Select (m.linefile)
Set Order To
Locate For pos = m.pos
Do While Found()
	If lockr()
		Dele
		Unlock
	Endif
	Continue
Enddo

Select (m.tempalias)
Replace All pos With m.pos
Delete All For Empty(itemcode)
Do linesave2

Set Order To lno
Go Bottom
m.maxno = lno

Select (m.linefile)
If lockf()
	Append From (m.tempalias)
	Unlock
Endif

Do linesave3

If !Empty(m.clients) .And. ;
	(m.uselast != 'N')
	select clients
	locate for clients=m.clients
	if found()

	Select lastitem
	Set Order To
	If lockf()
		Select (m.tempalias)
		Go Top
		Scan
			If price = 0
				Loop
			Endif
			Select lastitem
			Locate For clients = m.clients .And. ;
				itemcode = &tempalias->itemcode
			If !Found()
				m.lastitem=getnextno('lastitem', ;
					'lastitem', ;
					'getno')
				Append Blank
				Replace lastitem With m.lastitem
			Endif
			Replace clients With m.clients, ;
				itemcode With &tempalias->itemcode, ;
				title With &tempalias->Title, ;
				subtitle With &tempalias->subtitle, ;
				shipped With &tempalias->shipped, ;
				price With &tempalias->price, ;
				itemfile With &tempalias->itemfile, ;
				name1 With &tempalias->name1, ;
				cost With &tempalias->cost, ;
				option with &tempalias->option

			Select (m.tempalias)
		Endscan
		Unlock All
	Endif

	endif
Endif
Return

Procedure linesave2
*subclass
Replace All returndate With Date()
Return

Procedure linesave3
Select (m.tempalias)
Go Top
Scan
	If !Empty(itemfile)
		Do Alltrim(m.progdrv)+Alltrim(itemfile)+'.app' ;
			with .T., shipped, itemcode
	Endif
Endscan
Return

Procedure restoreme
Select (m.linefile)
Set Order To
Scan For pos = m.pos
	If File(Alltrim(m.progdrv)+Alltrim(itemfile)+'.app')
		Do Alltrim(m.progdrv)+Alltrim(itemfile) ;
			with .T., -shipped, itemcode
	Endif
	Select (m.linefile)
Endscan
Return

* procedure lprint
* if !empty(m.pos)
*  if _curobj >= firstkid() .and. ;
*  	 _curobj <= lastkid()
*  	if !empty(itemcode(pointer))
*			if alert('STOP','yN',-1,-1,;
*				'Print ' + alltrim(itemcode(pointer))+;
*				' ' + alltrim(title(pointer)) ) = 'Y'
*				select catalog
*				locate for module='pos98' .and.;
*					itemfile = itemfile(pointer)
*				if found()
*					do setlptn with driver
*				endif
*				select (m.tempalias)
*				set order to lno
*				seek(lno(pointer))
*				if found()
*			  	report form print1 to print noconsole next 1
*					set printer to
*				else
*				  =stopbox('Line item printing error')
*  			endif
*  		endif
*  	endif
*  endif
* endif
* return


Procedure d1item
If !scheck('pos98','editprint')
	Return
Endif

Do Case
Case _Curobj >= firstkid() .And. ;
		_curobj <= lastkid()
	Select (m.tempalias)
	Set Order To lno
	If Seek(lno(pointer))
		If really()
			Blank Field CheckIn, backorder
			CheckIn(pointer) = CheckIn
		Endif
	Endif
Endcase
Return

Procedure dcheck
Select (m.tempalias)
Set Order To lno
If Seek(lno(pointer))
	If Empty(&tempalias->returndate)
		Do deletei
		Do vtempsave
		Do sumext
	Else
		If scheck('pos98','deletei')
			Do deletei
			Do vtempsave
			Do sumext
		Endif
	Endif
Endif
Return

Function mcheck
Do Case
Case _Curobj = Objnum(shipped(pointer))
	If !Empty(returndate(pointer))
		If !scheck2('pos98','editqty')
			Return .F.
		Endif
	Endif
Case _Curobj = Objnum(unit0(pointer))
	If !scheck2('pos98','editunit')
		Return .F.
	Endif
Case _Curobj = Objnum(price(pointer))
	If price = 0
		Return .T.
	Endif
	If !scheck2('pos98','editprice')
		Return .F.
	Endif
Case _Curobj = Objnum(linedisc(pointer))
	If !scheck2('pos98','linedisc')
		Return .F.
	Endif
Case _Curobj = Objnum(m.discount) .Or. ;
		_curobj = Objnum(m.total)
	If !scheck2('pos98','editdisc')
		Return .F.
	Endif
Case _Curobj = Objnum(m.off)
	If m.membercredit <= 0
		Return .F.
	Endif
Case _Curobj = Objnum(m.taxrate)
	If !scheck2('pos98','edithead')
		Return .F.
	Endif
Case _Curobj >= firstkid() .And. ;
		_curobj <= lastkid() .And. ;
		_curobj != Objnum(linedisc(pointer))
	If !Empty(returndate(pointer))
		If !scheck2('pos98','edititem')
			Return .F.
		Endif
	Endif
Endcase
Return .T.

Procedure Auto
If Readkey() != 4
	If m.autotable != 'N'
		If Empty(itemcode(pointer))
			If Lastkey() != 27
				Do Table
				If Lastkey() = 27
					m.autotable = 'N'
				Endif
			Endif
		Endif
	Endif
	Return
Endif

Procedure checkme
If !scheck2('pos98','checkall')

	If jkey3('jbrowser',m.progdrv,;
			headfile,m.checkorder,;
			'misc:h=[No.],balance,clients',;
			'empty(post) .and. employee=['+m.login+']')
		Do loadkid With &headfile->pos, 'pos'
		m.oldkey = m.pos
	Endif

Else

	If Alltrim(Upper(byserver)) = 'V'
		If jkey3('jbrowser',m.progdrv,;
				'via','via',;
				'via','.t.')
			m.x = Alltrim(via.via)
			If jkey3('jbrowser',m.progdrv,;
					headfile,m.checkorder,;
					'misc:h=[No.],balance,clients',;
					'empty(post) .and. via=['+m.x+']')
				Do loadkid With &headfile->pos, 'pos'
				m.oldkey = m.pos
			Endif
		Endif
		Return
	Endif

	If m.byserver != 'N'
		If jkey3('jbrowser',m.progdrv,;
				'userid','userid',;
				'userid','.t.')
			m.x = Alltrim(Userid.Userid)
			If jkey3('jbrowser',m.progdrv,;
					headfile,m.checkorder,;
					'misc:h=[No.],balance,clients',;
					'empty(post) .and. employee=['+m.x+']')
				Do loadkid With &headfile->pos, 'pos'
				m.oldkey = m.pos
			Endif
		Else
			If jkey3('jbrowser',m.progdrv,;
					headfile,m.checkorder,;
					'misc:h=[No.],balance,clients,via,employee',;
					'empty(post)' )
				Do loadkid With &headfile->pos, 'pos'
				m.oldkey = m.pos
			Endif
		Endif
	Else
		If jkey3('jbrowser',m.progdrv,;
				headfile,m.checkorder,;
				'misc:h=[No.],balance,clients,via,employee',;
				'empty(post)' )
			Do loadkid With &headfile->pos, 'pos'
			m.oldkey = m.pos
		Endif
	Endif
Endif
Return


Procedure zeroitem
If !scheck('pos98','zeroitem')
	Return
Endif
If _Curobj >= firstkid() .And. ;
		_curobj <= lastkid()
	If !Empty(itemcode(pointer))
		price(pointer) = 0
		laborcost(pointer) = 0
		Do vtempsave
		Do sumext
		Show Gets
	Else
		If pointer > 1
			price(pointer-1) = 0
			laborcost(pointer-1) = 0
			pointer = pointer - 1
			Do vtempsave
			Do sumext
			pointer = pointer + 1
			Show Gets
		Endif
	Endif
Endif
Return

Procedure startinit
If !Empty(m.initprg) .And. Wexist('pos98')
	If File(m.progdrv + m.initprg)
		Do savekid With 'pos98'
		Do Alltrim(m.progdrv) + m.initprg With .T.,'.t.',m.oldv,m.areafrom
		Do restorekid With 'pos98'
		m.clients = Alltrim(m.oldv)
		If Alltrim(Upper(m.clients)) = Alltrim(Upper(m.exitkey))
			m.clients = ''
			m.loopinit = .T.
			m.login = ''
			m.j=.F.
			Return
		Endif
		Do startinit2
		If !Empty(m.clients)
			Select pos
			Set Order To
			Locate For clients = m.clients .And. Empty(post)
			If Found()
				If !scheck2('pos98','lookup')
					If Alltrim(pos.employee) != Alltrim(m.login)
						Do login2
						If Alltrim(m.login) != pos.employee
							=stopbox('Cannot load ' + ;
								alltrim(pos.employee) + ' table')
							Do restorekid With 'pos98'
							m.j = .T.
							Return
						Endif
					Endif
				Endif
				Do loadkid With &headfile->pos, 'pos'
				m.oldkey = m.pos
			Else
				If Used(areafile)
					Select (areafile)
					Set Order To
					Locate For itemcode = m.oldv
					If Found()
						If !Empty(&areafile->who)
							m.employee = Alltrim(&areafile->who)
						Endif
					Endif
				Endif
			Endif
		Endif
		Do refreshkid
	Endif
Endif
Return


Procedure startinit2
If !Empty(m.clients)
	Select via
	Locate For Alltrim(Upper(via)) = Alltrim(Upper(m.clients))
	If Found()
		m.via = via
		m.clients = m.automode
	Else
		m.via = Alltrim(m.initvia)
	Endif
Endif
Return

Procedure getmember
If Empty(m.askmember)
	If Empty(m.member)
		Do Alltrim(m.progdrv) + 'askme.exe' With ;
			'c','VIP Member Id?',m.member
		If !Empty(m.mid) .And. Upper(Left(m.member,1)) = m.mid
			m.member = Substr(m.member,2)
		Endif
		If !Empty(m.member)
			Do getcredit
		Endif
	Endif
Endif
Return

Procedure getcompany
If !Empty(m.askcompany)
	If Alltrim(m.via) $ Alltrim(m.askcompany)
		If Empty(m.company)
			Do Alltrim(m.progdrv) + 'askme.exe' With ;
				'c','How many people?',m.company
			_Curobj = _Curobj + 1
		Endif
	Else
		Return .F.
	Endif
Else
	If Empty(m.company)
		Do Alltrim(m.progdrv) + 'askme.exe' With ;
			'c','How many people?',m.company
	Endif
Endif
Return

Procedure getemp
If !Empty(m.askemploy)
	If Alltrim(m.via) $ Alltrim(m.askemploy)
		If m.employee='*'
			Return .F.
		Else
			If Empty(m.employee)
				If jkey3('jbrowser',m.progdrv,;
						'userid','userid',;
						'userid','.t.')
					m.employee = Userid.Userid
					Show Get m.employee
				Endif
			Endif
		Endif
	Else
		Return .F.
	Endif
Else
	If m.employee='*'
		Return .F.
	Else
		If Empty(m.employee)
			If jkey3('jbrowser',m.progdrv,;
					'userid','userid',;
					'userid','.t.')
				m.employee = Userid.Userid
				Show Get m.employee
			Endif
		Endif
	Endif
Endif
Return

Procedure getclients
Do getclient1
Do getclient2
Do cv
If !Empty(m.automode)
	If Alltrim(m.clients) = m.automode .and. ;
		empty(m.via)
		m.via = Alltrim(m.autovia)
	Endif
Endif
If Empty(m.clients)
	Return
Endif
If Empty(m.via)
	Select Alltrim(via) + ' ' + Alltrim(via2) From via Into Array b
	If Type('b') = 'C'
		Do m.progdrv + 'apick.exe' With ;
			'Please select transaction',b,m.via
		m.via = Alltrim(m.via)
		Select via
		Set Order To
		Locate For Alltrim(via) $ m.via
		If Found()
			m.via = Alltrim(via.via)
		Endif
	Endif
Endif

If !Empty(m.askc2) .And. m.addmode
	If Alltrim(m.via) $ Alltrim(m.askc2)
		If Alltrim(m.clients) = Alltrim(m.automode)
			m.clients = ''
		Endif
		Do custinfo.spr
		If Empty(m.clients)
			m.clients = Alltrim(m.automode)
		Else
			Do saveclients
		Endif
	Endif
Endif
Return

Procedure getclient1
Return

Procedure getclient2
If Empty(m.clients)
	Do Alltrim(m.progdrv) + 'askme.exe' With ;
		'c',Alltrim(m.m0) + Alltrim(m.automode) + ;
		' = ' + Alltrim(m.autovia) ,m.clients
Endif
Return

Procedure getmisc
If m.checkno != 'N'
	If Empty(m.misc)
		Do Alltrim(m.progdrv) + 'askme.exe' With ;
			'c','Check No?',m.misc
	Endif
	If Empty(m.misc)
		m.misc = ' '
	Endif
Endif
Return


Function v
Private m.who
m.who = ''
If m.lookupmode
	Return
Endif
If !scheck2('pos98','quit')
	If scheck2('pos98','logout')
		If alert('STOP','Yn',-1,-1,;
				"do you want to logout?") = 'Y'
			If !Empty(m.greeting)
				Do Alltrim(m.progdrv) + 'display.app' ;
					with .F.,'CLOSED'
			Endif
			m.login = ''
			Do Init
		Endif
		Return .F.
	Else
  		=stopbox('INVALID ACCESS CODE')
		Return .F.
	Endif
Else
	If alert('STOP','Yn',-1,-1,;
			"do you want to logout?") = 'Y'
		m.who = m.login
		m.login = ''
		If !Empty(m.greeting)
			Do Alltrim(m.progdrv) + 'display.app' ;
				with .F.,'CLOSED'
		Endif

		If alert('STOP','yN',-1,-1,;
				"do you want to quit?") = 'Y'
			m.login = m.who
			Return .T.
		Else
			Do Init
			Return .F.
		Endif
	Else
		Return .F.
	Endif
Endif


Procedure receipt1
Parameter lookupmode
If Parameters() = 0
	m.lookupmode = .F.
Endif
If !Empty(m.saveprint)
	If Type('oldv') != 'C'
		m.oldv = 'Y'
	Endif
	If m.oldv != 'Y' .And. !m.lookupmode
		Return
	Endif
	If File(Alltrim(m.progdrv)+m.saveprint+'.app')
		Do Alltrim(m.progdrv) + m.saveprint With .T.,'','',m.pos
	Else
		=stopbox('Printing module not found')
	Endif
Endif
Return

Procedure holdit

Private aflag, eflag
m.aflag = .F.
m.eflag = .F.


*
* if you don't want to print all at once, say default 'N'
* you have to come back and reprint the item which has
* a backorder on it.
* for faster operation, leave it to empty so
* cook can pick up faster
*

If m.printat1 = 'N'
	Select(m.tempalias)
	Locate For (backorder = 1)
	If Found()
		If alert('?','Yn',-1,-1,;
				'Ready for main') = 'Y'
			Replace All CheckIn With {//}, ;
				backorder With 0 For ;
				(backorder = 1)
			Select (m.linefile)
			Replace All CheckIn With {//}, ;
				backorder With 0 For ;
				(backorder = 1) .And. ;
				(pos = m.pos)
		Endif
	Endif
Endif

If Alltrim(m.via) $ m.holdvia
	Select (m.tempalias)
	Scan
		If (Alltrim(performby) $ m.holdcat) .And.;
				empty(CheckIn)
			m.aflag = .T.
		Else
			If Empty(CheckIn)
				m.eflag = .T.
			Endif
		Endif
		If m.aflag And m.eflag
			Exit
		Endif
	Endscan

	If m.aflag And m.eflag
		If alert('?','Yn',-1,-1,;
				'Hold for main') = 'Y'
			Select (m.linefile)
			Scan For pos = m.pos
				If !(Alltrim(performby) $ m.holdcat) .And. ;
						empty(CheckIn)
					If lockr()
						Replace backorder With 1
						If m.printat1 = 'N'
							Replace CheckIn With Date()
						Endif
						Unlock
					Endif
				Endif
			Endscan
		Endif
	Endif

Endif

Return

Procedure receipt2
If Alltrim(m.via) $ m.asknotice2 .Or. Empty(m.asknotice2)
	Select (m.tempalias)
	Locate For Empty(CheckIn)
	If Found()
		if !m.addmode
			m.reprint = .t.
		endif
		If !Empty(m.saveprint2)
			If m.autor = 'N'
				If alert('?','Yn',-1,-1,;
						'Print new entries') = 'N'
					Return
				Endif
			Endif

			If File(Alltrim(m.progdrv)+m.saveprint2+'.app')
				Do Alltrim(m.progdrv) + m.saveprint2 With ;
					.T.,'','',m.pos,'pos98'
				Select (m.linefile)
				Set Order To
				If lockf()
					Replace All CheckIn With Date() ;
						for pos = m.pos
					Unlock
				Endif
			Else
				=stopbox('Printing module not found')
			Endif
		Endif
	Endif
Endif
Return

Procedure receipt3
If Alltrim(m.via) $ m.asknotice

	If !Empty(m.saveprint3)

		If m.autor = 'N'
			If alert('?','Yn',-1,-1,;
					'Notice') = 'N'
				Return
			Endif
		Endif

		If File(Alltrim(m.progdrv)+m.saveprint3+'.app')
			Do Alltrim(m.progdrv) + m.saveprint3 With ;
				.T.,'','',m.pos, m.reprint
		Else
			=stopbox('Printing module not found')
		Endif

	Endif

Endif
Return

Procedure cv
Private who
m.who = ''
If !Empty(m.clients) .And. m.addmode
	Select area2
	Set Order To
	m.who = Strtran(m.clients,m.automode,'')
	Locate For itemcode=Alltrim(m.who)
	If !Found()
		Do rclients
	Else
		m.via = m.initvia
	Endif
	Select pos
	Set Order To
	Locate For clients = Alltrim(m.clients) .And. ;
		empty(post) .And. ;
		empty(duedate) .and. ;
		register = m.register

	If Found()
		If !scheck2('pos98','lookup')
			If pos.employee != m.login
				=okbox('Cannot load '+ Alltrim(pos.employee) + ' order')
				m.clients = ''
				_Curobj = Objnum(m.clients)
				Show Get m.clients
				Return
			Endif
		Endif
		Do loadkid With &headfile->pos, 'pos'
		m.oldkey = m.pos
	Endif
Endif
Return

Procedure rclients
Select clients
Set Order To

If !Empty(m.mid) .And. Left(m.clients,1) = m.mid
	m.member = Substr(m.clients,2)
	m.clients = ''
	Locate For member = m.member
Else
	Locate For clients = m.clients
Endif

If Found()
	m.clients = clients.clients
	Do rclients3
Else
	m.taxrate = Val(getlocal('pos98','taxrate'))
	If m.clicheck != 'N' .and. ;
		m.clients != m.automode
		m.oldv = ''
		Do m.progdrv+'clients.app' With .T.,'.t.',m.clients,'',Alltrim(m.clients)
		If m.oldv != m.clients
			m.clients = clients.clients
			Do rclients3
		Endif
	Endif
Endif

Do rclients2
Return

Procedure rclients2
Return

Procedure rclients3
m.firstname = clients.firstname
m.lastname = clients.lastname
m.address1 = clients.address1
m.address2 = clients.address2
m.address3 = clients.address3
m.approved = clients.approved
m.city= clients.city
m.state = clients.state
m.zip = clients.zip
m.zip4 = clients.zip4
m.member = clients.member
Do termsv
If !Empty(clients.taxexempt)
	m.taxrate = 0
else
	m.taxrate = Val(getlocal('pos98','taxrate'))
Endif
Do ctotal

Show Get m.approved
Show Get m.firstname
Show Get m.lastname
Show Get m.address1
Show Get m.address2
Show Get m.address3
Show Get m.city
Show Get m.state
Show Get m.zip
Show Get m.zip4
Show Get m.clients
Show Get m.member
If approved
	Do Alltrim(m.progdrv)+'notepad.exe' With ;
		'clients', 'notepad'
Endif

Do getcredit
Return

Procedure house
If !scheck('pos98','edithead')
	Return
Endif

m.oldv = m.clients
Do m.progdrv+'clients.app' With .T.,'.t.',m.clients,'',''
If m.oldv != m.clients
	m.clients = clients.clients
	Do rclients
Endif
Do rdue
Return


Procedure rdue
If m.askduedate != 'N'
	Do Alltrim(m.progdrv)+'askme.exe' With 'D', ;
		'Please enter the Duedate', m.duedate
	If !m.addmode
		Select pos
		Set Order To
		Locate For pos = m.pos
		If Found()
			If lockr()
				Replace duedate With m.duedate
				Unlock
			Endif
		Endif
	Endif
Endif
Return

Procedure openss
If !Empty(m.cashdrawer)
	Copy File cg. To &cashdrawer
Endif
Return

Procedure paynow
Select whatcard
Set Order To whatcard
Set Sysm Off
If Seek(m.method)
	If m.autocard = 'N'
		Do paynow2
	Endif
	m.surcharge = m.change
	m.change = 0
	m.payment = m.payment - m.surcharge
Else
	Do openss
Endif

Set Sysm Auto
Do Save
If m.oldv = 'C'
	_Curobj = Objnum(m.payment)
	m.payment = 0
	m.method = ''
	m.surcharge = 0
	m.change = 0
Endif
Return

Procedure paynow2
Do Alltrim(m.progdrv)+'askme.exe' With 'C', ;
	'Please enter the credit card number', m.cardno
Return

Procedure cdisplay
If !Empty(m.greeting)
	Do Alltrim(m.progdrv) + 'display.app' ;
		with .F.,'Total : ' + ;
		alltrim(Str(m.total-m.off,10,2))
Endif
Return

Function payv
private what, howmanym
m.what = ''
m.howmanym = 0

If m.payment = 0
	if m.balance > 0
		Return
	else
		select payment2
		locate for itemcode = m.pos
		do while found()
			m.what = payment2.split
			select method
			locate for method = m.what
			skip 1
			if eof()
				go top
			endif
			wait window 'Payment change from ' + ;
						alltrim(m.what) + ' to ' + ;
						alltrim(method.method)
			m.what = method.method
			select payment2
			if lockr()
				replace split with m.what
				unlock			
			endif
			select payment2
			continue
		enddo
		do init
		return
	endif
Endif

If m.payment > 0
	If !scheck2('pos98','partial')
		If m.payment < m.balance
			m.payment = 0.00
			=stopbox('Payment not valid')
			Return .F.
		Endif
	Endif
	If !scheck('pos98','cashier')
		=stopbox('Invalid cashier code - reset to 0.00 ')
		m.payment = 0
		Show Get m.payment
		Return .F.
	Endif
	if m.payment < m.balance
  		m.method = m.splitkey
  		m.promptr1 = ''
	endif
Else
	m.oldv = m.total
	m.total = m.total + m.payment
	m.payment = 0
	Do ctotal2
	_Curobj = Objnum(m.payment)
	m.oldv = ''
	Return
Endif

If m.addmode
	If m.payment > m.total
		m.change = m.payment - m.total
	Else
		m.change = 0
	Endif
	Show Get m.change
Else
	If m.payment > m.balance
		m.change = m.payment - m.balance
	Else
		m.change = 0
	Endif
	Show Get m.change
Endif

If m.payment > 0
	If m.balance = 0 .And. !m.addmode
		If alert('STOP','yN',-1,-1,;
				'Zero balance on this order',;
				'Do you still want a payment?') != 'Y'
			m.payment = 0
			Show Get m.payment
			Return .F.
		Endif
	Endif

	If methodv()
		Select method
		go top
		m.howmanym = reccount()
		if m.howmanym <= 1
			m.method = method.method
		else
			if empty(m.method) .or. (m.method = m.splitkey)
				Do payv2
				if empty(m.method)
				  return
				endif
			endif
		endif		
		do paynow
	Endif

Endif
Return .T.

Procedure payv2
private temp

if left(m.method,1) = m.splitkey
  m.temp=alphanum(m.method,'Aa')
  if !empty(m.temp)
	  select method
	  locate for method = m.temp
	  if found()
    	do paynow
	    return
	  endif
  endif
endif

If jkey3('jbrowser',m.progdrv,;
		'method','method',;
		'method','.t.')
	if m.method = m.splitkey
	  m.method = m.splitkey + alltrim(method.method)
	else
	  m.method = method.method
	endif
	Show Get m.method
Else
	_Curobj = Objnum(m.payment)
Endif
Return


procedure tvia
select via
set order to
locate for via=m.via
if eof()
  go top
else
  skip 1
endif
m.via = via.via
Show Get m.via
return


Procedure tterms

If _Curobj >= firstkid() .And. ;
		_curobj <= lastkid()

	If !Empty(returndate(pointer))
		If !scheck('pos98','edititem')
			Return
		Endif
	Endif

	If !Empty(itemcode(pointer)) .And. ;
			!Empty(itemfile(pointer))

		Select Alltrim(itemfile(pointer))
		If !fieldfound('special')
			Return
		Endif

		If Used(Alltrim(itemfile(pointer)))
			Select Option
			Set Order To
			Locate For Upper(booklink) = Upper(itemfile(pointer)) .And. ;
				iclink = Alltrim(itemcode(pointer))
			If Found() .And. Option.setprice
				If Option.howmuch != Option.Special
					Do Case
					Case price(pointer)=howmuch
						price(pointer) = Special
						itemname(pointer) = Strtran(itemname(pointer), ;
							alltrim(After), ;
							'')
						itemname(pointer) = itemname(pointer) + Alltrim(m.before)

					Case price(pointer)=Special
						price(pointer) = 0
						itemname(pointer) = Strtran(itemname(pointer), ;
							alltrim(Before), ;
							'')
						itemname(pointer) = itemname(pointer) + Alltrim(m.m00)
					Case price(pointer)=0
						price(pointer) = howmuch
						itemname(pointer) = Strtran(itemname(pointer), ;
							alltrim(m.m00), ;
							'')
						itemname(pointer) = itemname(pointer) + Alltrim(m.after)
					Endcase

*						if price(pointer) = howmuch
*							price(pointer) = special
*							itemname(pointer) = strtran(itemname(pointer), ;
*																	alltrim(after), ;
*																	alltrim(m.before))
*						else
*							price(pointer) = howmuch
*							itemname(pointer) = strtran(itemname(pointer), ;
*																	alltrim(before), ;
*																	alltrim(m.after))
*						endif

				Endif
			Else
				Select Alltrim(itemfile(pointer))
				Set Order To
				Locate For Code = itemcode(pointer)
				If Found()
					If price != Special

						Do Case
						Case price(pointer)=price
							price(pointer) = Special
							itemname(pointer) = Strtran(itemname(pointer), ;
								alltrim(After), ;
								'')
							itemname(pointer) = itemname(pointer) + Alltrim(m.before)
						Case price(pointer)=Special
							price(pointer) = 0
							itemname(pointer) = Strtran(itemname(pointer), ;
								alltrim(Before), ;
								'')
							itemname(pointer) = itemname(pointer) + Alltrim(m.m00)
						Case price(pointer)=0
							price(pointer) = price
							itemname(pointer) = Strtran(itemname(pointer), ;
								alltrim(m.m00), ;
								'')
							itemname(pointer) = itemname(pointer) + Alltrim(m.after)
						Endcase


*						if price(pointer) = price
*							price(pointer) = special
*							itemname(pointer) = strtran(itemname(pointer), ;
*																	alltrim(after), ;
*																	alltrim(m.before))
*						else
*							price(pointer) = price
*							itemname(pointer) = strtran(itemname(pointer), ;
*																	alltrim(before), ;
*																	alltrim(m.after))
*						endif

					Endif
				Endif
			Endif
			Do vtempsave
			Do sumext
			Show Get price(pointer)
			Show Get itemname(pointer)
			Return
		Endif
	Endif

Endif

If m.terms = m.before
	m.terms = m.after
Else
	m.terms = m.before
Endif
Show Get m.terms
Return

Function empw
If !scheck2('pos98','edithead')
	Return .F.
Endif
If !scheck2('pos98','editname')
	Return .F.
Endif
Do getemp
Return

Function empv
If m.idcheck != 'N'
	If Empty(m.employee)
		=stopbox('Please enter your employee id')
		Return 0
	Endif
Endif
Return

Function cliw
If !scheck2('pos98','edithead')
	Return .F.
Endif
Return

Function cliv
Do cv
Return

Function viaw
If !scheck2('pos98','edithead')
	Return .F.
Endif

If Empty(m.via)
	Do Table
Endif
Return .T.

Function comw
If !scheck2('pos98','edithead')
	Return .F.
Endif
Do getcompany
Return

Function miscw
If !scheck2('pos98','edithead')
	Return .F.
Endif
Return

Function miscv
If m.checkno != 'N'
	If Empty(m.misc)
		=stopbox('Enter Receipt No.')
		Return .F.
	Endif
Endif
Return


Function paymentw
If m.applycash != 'N'
	m.payment = m.total
Endif
Return

Function methodv
If !Empty(m.method) .and. left(m.method,1)!=m.splitkey
	Select method
	Set Order To method
	If !Seek(m.method)
		=stopbox('Method of payment not registered')
		Return 0
	Endif
Endif
Return

Function chav
If m.oldv != m.chargerate
	m.surcharge = m.subtotal * chargerate / 100
	Show Get m.surcharge
Endif
m.oldv = ''
Return

Function appv
If Lastkey() = 13
	m.approved = !m.approved
	Show Get m.approved
Endif
If m.approved
	If !Empty(m.clients)
		Select clients
		Set Order To clients
		If Seek(m.clients)
			Do Alltrim(m.progdrv)+'notepad.exe' With ;
				'clients', 'notepad'
			Replace clients.approved With .T.
		Endif
	Endif
Else
	If !Empty(m.clients)
		Select clients
		Set Order To clients
		If Seek(m.clients)
			Replace clients.approved With .F.
		Endif
	Endif
Endif
Return

Procedure resetall
If !scheck('pos98','editprint')
	Return
Endif
Select (m.tempalias)
Blank All Fields CheckIn, backorder
Do linesave
Do loadkid With m.pos, 'pos'
Return

Procedure pr
If !scheck('pos98','lookup')
	Return
Endif
Do previous With 'pos','pos'
If !Bof(m.headfile)
	Do loadkid With pos.pos, ;
		'pos'
Endif
Return

Procedure nr
If !scheck('pos98','lookup')
	Return
Endif

Do Next With 'pos','pos'
If !Eof(m.headfile)
	Do loadkid With pos.pos, ;
		'pos'
Endif
Return

Procedure fr
If !scheck('pos98','lookup')
	Return
Endif
Do First With 'pos','pos'
If !Bof(m.headfile)
	Do loadkid With pos.pos, ;
		'pos'
Endif
Return

Procedure lr
If !scheck('pos98','lookup')
	Return
Endif
Do Last With 'pos','pos'
If !Eof(m.headfile)
	Do loadkid With pos.pos, ;
		'pos'
Endif
Return

Procedure loginp
Do login2
m.misc2 = m.misc2 + ' ' + m.login
m.misc2 = Alltrim(m.misc2)
If m.addmode .And. Empty(m.employee)
	m.employee = m.login
	Show Get m.employee
Endif
Do selectm
Return

Procedure Autosave
If _Curobj != Objnum(m.payment)
	if _curobj = objnum(m.total)
		if m.oldv != m.total
			do ctotal2
		endif
		m.oldv = ''			
	endif
	_Curobj = Objnum(m.payment)

Else
	Do autosave2
Endif
Return

Procedure autosave2
Private temp1, temp2, temp3, temp4

m.temp2 = .T.
m.temp1 = ''
m.temp4 = ''

*	if m.payment = 0

m.payment = 0
m.cardno = ''

* m.method = ''


Do While m.temp2
	m.temp1 = 'Tender Amount ' + ;
		alltrim(Str(m.balance,10,2)) + ;
		iif(!Empty(Alltrim(m.splitkey)), ;
		' - '+Alltrim(m.splitkey)+ ' for split tender' ;
		,'') + ;
		iif(!Empty(Alltrim(offkey)), ;
		' - ' + Alltrim(m.offkey) + ' for coupon','')

	Do autosave2a

	m.cardno = Alltrim(m.cardno)
	m.temp2 = .F.
	
	if empty(m.cardno) .and. balance > 0
		temp4=alert('CAUTION','Ync',-1,-1,;
				'Credit Card')
		if temp4 = 'Y'
			m.cardno = alltrim(str(m.balance,8,2))
			if left(m.method,1) != m.splitkey
			  m.method = 'Credit'
			else
			  m.method = m.splitkey + 'Credit'
			endif
		endif	
		if temp4 = 'C'
		  return
		endif		
	endif

	If !Empty(m.splitkey)
		If Alltrim(m.splitkey) + Alltrim(m.splitkey) = Alltrim(m.cardno)
			m.payment = m.total
			=payv()
			Return
		Endif
	Endif

	If !Empty(m.offkey)
		If Alltrim(m.offkey) = Alltrim(m.cardno)
			Do autosave2b
			m.cardno = ''
			m.temp2 = .T.
		Endif
	Endif

	If !Empty(m.setpaykey)
		If Alltrim(m.setpaykey) = Alltrim(m.cardno)
			Do setpayment
			m.cardno = ''
			m.temp2 = .T.
		Endif
	Endif

Enddo

if !empty(m.splitkey)
	if alltrim(m.cardno) = m.splitkey
		Do tablef2
		Do Save
		Return
	endif		
endif

If m.cardi $ m.cardno
	Do Alltrim(progdrv) + 'icverify.app' ;
		with .T.,'.t.',m.cardresult
	If !Empty(m.cardresult)
		m.payment = 0
		m.method = ''
		Show Get m.payment
		Show Get m.method
		m.cardresult = ''
	Else
		m.cardresult = ''
	Endif
Else
	If Empty(m.cardno) .and. m.balance > 0
		If !scheck2('pos98','partial')
			return .f.
		else			
			Do Save
		endif			
	Else
		m.payment = Val(m.cardno)
		=payv()
	Endif
Endif

*	else
*		if !payv()
*		  return
*		endif
*	endif

Return

Procedure autosave2a
Do Alltrim(m.progdrv) + 'askme.exe' With ;
	'c',alltrim(m.temp1),m.cardno, m.confirm
Return

Procedure autosave2b
Private temp3
temp3 = 0
Do Alltrim(m.progdrv) + 'askme.exe' With ;
	'n','Enter the coupon amount',m.temp3

m.total = m.total - temp3
Do ctotal2
m.note=m.note + Alltrim('coupon : ' + Str(temp3,8,2))

Return

Procedure selectm
If !scheck2('pos98','fullmenu')
	If Language != 'N'
		Do Half.mpr
	Else
		Do halfc.mpr
	Endif
Else
	If Language != 'N'
		Do pos98.mpr
	Else
		Do pos98c.mpr
	Endif
Endif
Return

Procedure checktl
Private whatdate
m.whatdate = Iif( (Val(Sys(2)) < 3600 * m.starthour + ;
	60 * m.startmin),Date()-1,Date())
If m.timelog != 'N'
	Select timelog
	Set Order To
	Locate For Userid = m.login .And. ;
		datein = m.whatdate .And. ;
		empty(Timeout)
	If !Found()
		Do Alltrim(m.progdrv) + 'timelog.app' With .T.
		m.oldv2 = 'restart'
	Endif
Endif
Return

Procedure homekey
If _Curobj != firstkid()
	_Curobj = firstkid()
Else
	Do AddLine
Endif

Return

Procedure termsv
Select terms
Set Order To
Locate For terms = m.terms
If Found()
	Do Case
	Case terms.Sort <= 1
		m.duedate = m.orderdate + terms.duedays
	Case terms.Sort = 2
		m.duedate = fom(Gomonth(m.orderdate,forwardm)) + Dayofmonth - 1
	Case terms.Sort = 3
		m.duedate = m.orderdate + (forwardw*7)
		If Dow(duedate) > terms.Dayofweek
			m.duedate = m.duedate - (Dow(duedate) - terms.Dayofweek)
		Else
			m.duedate = m.duedate + (terms.Dayofweek - Dow(duedate))
		Endif
	Endcase

	m.discdate = m.orderdate + terms.discdays
	m.discper = terms.discper
	m.deliveryon = Date() + terms.deliveryin
	Show Get m.discdate
	Show Get m.discper
	Show Get m.duedate

Endif
Return

Procedure addrun
Parameter howmuch
If !Empty(m.clients)
	Select clients
	Set Order To
	Locate For clients = m.clients
	If Found()
		If lockr()
			Replace runbalance With runbalance + howmuch
			Unlock
		Endif
	Endif
Endif
Return

Procedure changerun
Parameter ov, nv
If !Empty(m.clients)
	Select clients
	Set Order To
	Locate For clients = m.clients
	If Found()
		If lockr()
			Replace runbalance With (runbalance - m.ov)
			Replace runbalance With (runbalance + m.nv)
			Unlock
		Endif
	Endif
Endif
Return

Procedure setpayment
If !Empty(m.pos)
	Select Payment
	Set Order To
	If !lockf()
		Return
	Else
		Select payment2
		Set Order To
		If !lockf()
			Return
		Endif
	Endif
	Scan For itemcode = m.pos
		Select Payment
		Delete All For Payment = payment2.Payment
		Select payment2
		Delete
	Endscan
	Unlock All
	m.off = 0
	m.afteroff = 0
	m.balance = m.total
	Do save2
Endif
Return

Procedure midc
If !Empty(m.mid) .And. Upper(Left(m.member,1)) = m.mid
	m.member = Substr(m.member,2)
Endif
Return

Procedure getcredit
If !Empty(m.member)
	Select member
	Locate For member = Alltrim(m.member)
	If Found()
		m.membercredit = member.control1
		Show Get membercredit
	Endif
Endif
Return


Procedure login2
If m.touchscreen
	Do Alltrim(m.progdrv) + 'login2.exe' With .F.,'',.T.
Else
	Do Alltrim(m.progdrv) + 'login2.exe' With .F.,'',.F.
Endif
Return

Procedure startloc
_Curobj = firstkid()
Return

function v2

	If scheck2('pos98','quit')
		return .t.
	endif

if m.addmode .and. m.balance > 0
  return .f.
endif

	close database

	if file('exit1.bat')
	  !exit1
	endif
	if !empty(exitprg)
		if file(exitprg)
		  do (exitprg)
		  wait window 'good bye'
		else
		  wait window
		endif
	else
		wait window
	endif

	  do loadtable

	If scheck2('pos98','logout')
		if lastkey() = 13
			If !Empty(m.greeting)
				Do Alltrim(m.progdrv) + 'display.app' ;
					with .F.,'CLOSED'
			Endif
			m.login = ''
		endif
	endif

	  do init
	  return .f.
return
** End of inserted file ..\METHOD.PRG 컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴end




*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*           POS98/MS-DOS Supporting Procedures and Functions     
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*

#REGION 1
procedure getreg
private joexxx, temp, jeff

  jeff = 0
  temp = 0

select 0
select total, register from pos ;
		where orderdate = date() .and. ;
		method = 'Credit' ;
		into cursor query1

sum total for m.register $ register to jeff
use in query1
		
	if _tally > 0
    wait window 'Credit Card Total : ' + alltrim(str(jeff,12,2))
	endif    		

  select sum(total) from pos into array joexxx ;
    where register = m.register
  if _tally > 0

    do alltrim(m.progdrv) + 'askme.exe' with ;
	 	'n','1st Password?',m.temp
	if m.temp = m.resetcode
	    wait window str(joexxx,12,2)
	endif
  else
    wait window '0.00'
  endif

    do alltrim(m.progdrv) + 'askme.exe' with ;
	 	'n','Reset Code?',m.temp
	if m.temp = m.resetcode
		select pos
		replace all register with '*' + register ;
		for register = m.register
	endif

return


procedure retails
parameter what
select local
set order to
locate for program='pos98' .and. function = 'clients'
if found()
	if lockr()
  	replace setting with m.what
  endif
  unlock
endif
m.clients = m.what
show get m.clients

if m.clients = m.automode
  m.via = m.autovia
else
  m.via = m.initvia
endif
show get m.via
return

procedure namecheck
if m.terms = m.after
	return .f.
else
  return .t.
endif	
return


procedure sumext2
private i
i = 0
select break
set order to
locate for bcode= itemcode(pointer)	.and. ;
					 bterms = m.terms
if found()
  if shipped(pointer) >= break.bqty
		i = mod(shipped(pointer),break.bqty)
		laborhour(pointer) = shipped(pointer) - i
		laborcost(pointer) = break.bprice
		shipped(pointer) = i
  endif
endif
return

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQGK           itemcode[1] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   38     
*        Variable:            itemcode[1]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      1                                  
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqgk     &&  itemcode[1] WHEN
#REGION 1
do cp
m.oldv = itemcode[pointer]
do auto

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQGP           itemcode[1] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   38     
*        Variable:            itemcode[1]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      2                                  
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqgp     &&  itemcode[1] VALID
#REGION 1
if !i1valid()
  return 0
endif


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQGT           shipped[1] WHEN                    
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   39     
*        Variable:            shipped[1]                         
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      3                                  
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqgt     &&  shipped[1] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQGW           shipped[1] VALID                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   39     
*        Variable:            shipped[1]                         
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      4                                  
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqgw     &&  shipped[1] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQH1           unit0[1] WHEN                      
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   40     
*        Variable:            unit0[1]                           
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      5                                  
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqh1     &&  unit0[1] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQH3           unit0[1] VALID                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   40     
*        Variable:            unit0[1]                           
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      6                                  
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqh3     &&  unit0[1] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQH8           price[1] WHEN                      
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   41     
*        Variable:            price[1]                           
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      7                                  
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqh8     &&  price[1] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQIT           price[1] VALID                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   41     
*        Variable:            price[1]                           
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      8                                  
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqit     &&  price[1] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQIU           linedisc[1] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   42     
*        Variable:            linedisc[1]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      9                                  
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqiu     &&  linedisc[1] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQIV           linedisc[1] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   42     
*        Variable:            linedisc[1]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      10                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqiv     &&  linedisc[1] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQIW           tracking[1] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   44     
*        Variable:            tracking[1]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      11                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqiw     &&  tracking[1] WHEN
#REGION 1
do cp
if m.edittitle = 'N'
  do namevalid
  _curobj = _curobj + 1
endif

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQIX           tracking[1] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   44     
*        Variable:            tracking[1]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      12                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqix     &&  tracking[1] VALID
#REGION 1
do namevalid


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQIY           itemcode[2] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   46     
*        Variable:            itemcode[2]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      13                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqiy     &&  itemcode[2] WHEN
#REGION 1
do cp
m.oldv = itemcode[pointer]

do auto

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQIZ           itemcode[2] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   46     
*        Variable:            itemcode[2]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      14                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqiz     &&  itemcode[2] VALID
#REGION 1
if !rvalid()
  return 0
endif


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQJM           shipped[2] WHEN                    
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   47     
*        Variable:            shipped[2]                         
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      15                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqjm     &&  shipped[2] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQL8           shipped[2] VALID                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   47     
*        Variable:            shipped[2]                         
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      16                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twql8     &&  shipped[2] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQLB           unit0[2] WHEN                      
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   48     
*        Variable:            unit0[2]                           
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      17                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqlb     &&  unit0[2] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQLD           unit0[2] VALID                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   48     
*        Variable:            unit0[2]                           
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      18                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqld     &&  unit0[2] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQLG           price[2] WHEN                      
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   49     
*        Variable:            price[2]                           
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      19                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqlg     &&  price[2] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQLI           price[2] VALID                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   49     
*        Variable:            price[2]                           
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      20                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqli     &&  price[2] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQLL           linedisc[2] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   50     
*        Variable:            linedisc[2]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      21                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqll     &&  linedisc[2] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQLM           linedisc[2] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   50     
*        Variable:            linedisc[2]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      22                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqlm     &&  linedisc[2] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQLQ           tracking[2] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   52     
*        Variable:            tracking[2]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      23                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqlq     &&  tracking[2] WHEN
#REGION 1
do cp
if m.edittitle = 'N'
  do namevalid
  _curobj = _curobj + 1
endif

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQLS           tracking[2] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   52     
*        Variable:            tracking[2]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      24                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqls     &&  tracking[2] VALID
#REGION 1
do namevalid


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQLT           itemcode[3] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   54     
*        Variable:            itemcode[3]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      25                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqlt     &&  itemcode[3] WHEN
#REGION 1
do cp
m.oldv = itemcode[pointer]

do auto

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQLU           itemcode[3] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   54     
*        Variable:            itemcode[3]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      26                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqlu     &&  itemcode[3] VALID
#REGION 1
if !rvalid()
  return 0
endif


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQM1           shipped[3] WHEN                    
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   55     
*        Variable:            shipped[3]                         
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      27                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqm1     &&  shipped[3] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQM3           shipped[3] VALID                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   55     
*        Variable:            shipped[3]                         
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      28                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqm3     &&  shipped[3] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQM6           unit0[3] WHEN                      
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   56     
*        Variable:            unit0[3]                           
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      29                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqm6     &&  unit0[3] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQM8           unit0[3] VALID                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   56     
*        Variable:            unit0[3]                           
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      30                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqm8     &&  unit0[3] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQMA           price[3] WHEN                      
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   57     
*        Variable:            price[3]                           
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      31                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqma     &&  price[3] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQOL           price[3] VALID                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   57     
*        Variable:            price[3]                           
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      32                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqol     &&  price[3] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQON           linedisc[3] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   58     
*        Variable:            linedisc[3]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      33                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqon     &&  linedisc[3] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQOQ           linedisc[3] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   58     
*        Variable:            linedisc[3]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      34                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqoq     &&  linedisc[3] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQOT           tracking[3] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   60     
*        Variable:            tracking[3]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      35                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqot     &&  tracking[3] WHEN
#REGION 1
do cp
if m.edittitle = 'N'
  do namevalid
  _curobj = _curobj + 1
endif

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQOW           tracking[3] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   60     
*        Variable:            tracking[3]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      36                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqow     &&  tracking[3] VALID
#REGION 1
do namevalid


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQOX           itemcode[4] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   62     
*        Variable:            itemcode[4]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      37                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqox     &&  itemcode[4] WHEN
#REGION 1
do cp
m.oldv = itemcode[pointer]

do auto

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQOY           itemcode[4] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   62     
*        Variable:            itemcode[4]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      38                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqoy     &&  itemcode[4] VALID
#REGION 1
if !rvalid()
  return 0
endif


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQOZ           shipped[4] WHEN                    
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   63     
*        Variable:            shipped[4]                         
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      39                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqoz     &&  shipped[4] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQP0           shipped[4] VALID                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   63     
*        Variable:            shipped[4]                         
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      40                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqp0     &&  shipped[4] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQP1           unit0[4] WHEN                      
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   64     
*        Variable:            unit0[4]                           
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      41                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqp1     &&  unit0[4] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQPB           unit0[4] VALID                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   64     
*        Variable:            unit0[4]                           
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      42                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqpb     &&  unit0[4] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQPE           price[4] WHEN                      
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   65     
*        Variable:            price[4]                           
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      43                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqpe     &&  price[4] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQPK           price[4] VALID                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   65     
*        Variable:            price[4]                           
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      44                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqpk     &&  price[4] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQPN           linedisc[4] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   66     
*        Variable:            linedisc[4]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      45                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqpn     &&  linedisc[4] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQPQ           linedisc[4] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   66     
*        Variable:            linedisc[4]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      46                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqpq     &&  linedisc[4] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQPT           tracking[4] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   68     
*        Variable:            tracking[4]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      47                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqpt     &&  tracking[4] WHEN
#REGION 1
do cp
if m.edittitle = 'N'
  do namevalid
  _curobj = _curobj + 1
endif

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQPW           tracking[4] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   68     
*        Variable:            tracking[4]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      48                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqpw     &&  tracking[4] VALID
#REGION 1
do namevalid


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQPZ           itemcode[5] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   70     
*        Variable:            itemcode[5]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      49                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqpz     &&  itemcode[5] WHEN
#REGION 1
do cp
m.oldv = itemcode[pointer]

do auto

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQQ1           itemcode[5] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   70     
*        Variable:            itemcode[5]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      50                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqq1     &&  itemcode[5] VALID
#REGION 1
if !rvalid()
  return 0
endif


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQRN           shipped[5] WHEN                    
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   71     
*        Variable:            shipped[5]                         
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      51                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqrn     &&  shipped[5] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQRP           shipped[5] VALID                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   71     
*        Variable:            shipped[5]                         
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      52                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqrp     &&  shipped[5] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQRS           unit0[5] WHEN                      
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   72     
*        Variable:            unit0[5]                           
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      53                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqrs     &&  unit0[5] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQRU           unit0[5] VALID                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   72     
*        Variable:            unit0[5]                           
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      54                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqru     &&  unit0[5] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQRX           price[5] WHEN                      
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   73     
*        Variable:            price[5]                           
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      55                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqrx     &&  price[5] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQRY           price[5] VALID                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   73     
*        Variable:            price[5]                           
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      56                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqry     &&  price[5] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQRZ           linedisc[5] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   74     
*        Variable:            linedisc[5]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      57                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqrz     &&  linedisc[5] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQS0           linedisc[5] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   74     
*        Variable:            linedisc[5]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      58                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqs0     &&  linedisc[5] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQS1           tracking[5] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   76     
*        Variable:            tracking[5]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      59                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqs1     &&  tracking[5] WHEN
#REGION 1
do cp
if m.edittitle = 'N'
  do namevalid
  _curobj = _curobj + 1
endif

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQS2           tracking[5] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   76     
*        Variable:            tracking[5]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      60                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqs2     &&  tracking[5] VALID
#REGION 1
do namevalid


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQS3           itemcode[6] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   78     
*        Variable:            itemcode[6]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      61                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqs3     &&  itemcode[6] WHEN
#REGION 1
do cp
m.oldv = itemcode[pointer]

do auto

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQSF           itemcode[6] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   78     
*        Variable:            itemcode[6]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      62                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqsf     &&  itemcode[6] VALID
#REGION 1
if !rvalid()
  return 0
endif


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQSI           shipped[6] WHEN                    
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   79     
*        Variable:            shipped[6]                         
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      63                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqsi     &&  shipped[6] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQSL           shipped[6] VALID                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   79     
*        Variable:            shipped[6]                         
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      64                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqsl     &&  shipped[6] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQSO           unit0[6] WHEN                      
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   80     
*        Variable:            unit0[6]                           
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      65                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqso     &&  unit0[6] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQSQ           unit0[6] VALID                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   80     
*        Variable:            unit0[6]                           
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      66                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqsq     &&  unit0[6] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQST           price[6] WHEN                      
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   81     
*        Variable:            price[6]                           
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      67                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqst     &&  price[6] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQSU           price[6] VALID                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   81     
*        Variable:            price[6]                           
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      68                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqsu     &&  price[6] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQSX           linedisc[6] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   82     
*        Variable:            linedisc[6]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      69                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqsx     &&  linedisc[6] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQT0           linedisc[6] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   82     
*        Variable:            linedisc[6]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      70                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqt0     &&  linedisc[6] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQT2           tracking[6] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   84     
*        Variable:            tracking[6]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      71                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqt2     &&  tracking[6] WHEN
#REGION 1
do cp
if m.edittitle = 'N'
  do namevalid
  _curobj = _curobj + 1
endif

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQT5           tracking[6] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   84     
*        Variable:            tracking[6]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      72                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqt5     &&  tracking[6] VALID
#REGION 1
do namevalid


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQUR           itemcode[7] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   86     
*        Variable:            itemcode[7]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      73                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqur     &&  itemcode[7] WHEN
#REGION 1
do cp
m.oldv = itemcode[pointer]

do auto

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQUU           itemcode[7] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   86     
*        Variable:            itemcode[7]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      74                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twquu     &&  itemcode[7] VALID
#REGION 1
if !rvalid()
  return 0
endif


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQUW           shipped[7] WHEN                    
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   87     
*        Variable:            shipped[7]                         
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      75                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twquw     &&  shipped[7] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQUY           shipped[7] VALID                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   87     
*        Variable:            shipped[7]                         
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      76                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twquy     &&  shipped[7] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQUZ           unit0[7] WHEN                      
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   88     
*        Variable:            unit0[7]                           
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      77                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twquz     &&  unit0[7] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQV0           unit0[7] VALID                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   88     
*        Variable:            unit0[7]                           
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      78                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqv0     &&  unit0[7] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQV1           price[7] WHEN                      
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   89     
*        Variable:            price[7]                           
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      79                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqv1     &&  price[7] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQV2           price[7] VALID                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   89     
*        Variable:            price[7]                           
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      80                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqv2     &&  price[7] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQV3           linedisc[7] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   90     
*        Variable:            linedisc[7]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      81                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqv3     &&  linedisc[7] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQV4           linedisc[7] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   90     
*        Variable:            linedisc[7]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      82                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqv4     &&  linedisc[7] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQV5           tracking[7] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   92     
*        Variable:            tracking[7]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      83                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqv5     &&  tracking[7] WHEN
#REGION 1
do cp
if m.edittitle = 'N'
  do namevalid
  _curobj = _curobj + 1
endif

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQVJ           tracking[7] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   92     
*        Variable:            tracking[7]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      84                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqvj     &&  tracking[7] VALID
#REGION 1
do namevalid


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQVM           itemcode[8] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   94     
*        Variable:            itemcode[8]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      85                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqvm     &&  itemcode[8] WHEN
#REGION 1
do cp
m.oldv = itemcode[pointer]

do auto

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQVP           itemcode[8] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   94     
*        Variable:            itemcode[8]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      86                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqvp     &&  itemcode[8] VALID
#REGION 1
if !rvalid()
  return 0
endif


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQVR           shipped[8] WHEN                    
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   95     
*        Variable:            shipped[8]                         
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      87                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqvr     &&  shipped[8] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQVT           shipped[8] VALID                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   95     
*        Variable:            shipped[8]                         
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      88                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqvt     &&  shipped[8] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQVV           unit0[8] WHEN                      
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   96     
*        Variable:            unit0[8]                           
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      89                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqvv     &&  unit0[8] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQVY           unit0[8] VALID                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   96     
*        Variable:            unit0[8]                           
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      90                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqvy     &&  unit0[8] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQW1           price[8] WHEN                      
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   97     
*        Variable:            price[8]                           
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      91                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqw1     &&  price[8] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQW2           price[8] VALID                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   97     
*        Variable:            price[8]                           
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      92                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqw2     &&  price[8] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQW6           linedisc[8] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   98     
*        Variable:            linedisc[8]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      93                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqw6     &&  linedisc[8] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQW7           linedisc[8] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:   98     
*        Variable:            linedisc[8]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      94                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqw7     &&  linedisc[8] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQXU           tracking[8] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  100     
*        Variable:            tracking[8]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      95                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqxu     &&  tracking[8] WHEN
#REGION 1
do cp
if m.edittitle = 'N'
  do namevalid
  _curobj = _curobj + 1
endif

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQXW           tracking[8] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  100     
*        Variable:            tracking[8]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      96                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqxw     &&  tracking[8] VALID
#REGION 1
do namevalid


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQY0           itemcode[9] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  102     
*        Variable:            itemcode[9]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      97                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqy0     &&  itemcode[9] WHEN
#REGION 1
do cp
m.oldv = itemcode[pointer]

do auto

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQY2           itemcode[9] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  102     
*        Variable:            itemcode[9]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      98                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqy2     &&  itemcode[9] VALID
#REGION 1
if !rvalid()
  return 0
endif


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQY3           shipped[9] WHEN                    
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  103     
*        Variable:            shipped[9]                         
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      99                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqy3     &&  shipped[9] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQY4           shipped[9] VALID                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  103     
*        Variable:            shipped[9]                         
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      100                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqy4     &&  shipped[9] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQY5           unit0[9] WHEN                      
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  104     
*        Variable:            unit0[9]                           
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      101                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqy5     &&  unit0[9] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQY6           unit0[9] VALID                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  104     
*        Variable:            unit0[9]                           
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      102                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqy6     &&  unit0[9] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQY7           price[9] WHEN                      
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  105     
*        Variable:            price[9]                           
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      103                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqy7     &&  price[9] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQY8           price[9] VALID                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  105     
*        Variable:            price[9]                           
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      104                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqy8     &&  price[9] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQY9           linedisc[9] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  106     
*        Variable:            linedisc[9]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      105                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqy9     &&  linedisc[9] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQYL           linedisc[9] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  106     
*        Variable:            linedisc[9]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      106                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqyl     &&  linedisc[9] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQYP           tracking[9] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  108     
*        Variable:            tracking[9]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      107                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqyp     &&  tracking[9] WHEN
#REGION 1
do cp
if m.edittitle = 'N'
  do namevalid
  _curobj = _curobj + 1
endif

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQYR           tracking[9] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  108     
*        Variable:            tracking[9]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      108                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqyr     &&  tracking[9] VALID
#REGION 1
do namevalid


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQYV           itemcode[10] WHEN                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  110     
*        Variable:            itemcode[10]                       
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      109                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqyv     &&  itemcode[10] WHEN
#REGION 1
do cp
m.oldv = itemcode[pointer]

do auto

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWQZX           itemcode[10] VALID                 
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  110     
*        Variable:            itemcode[10]                       
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      110                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twqzx     &&  itemcode[10] VALID
#REGION 1
if !rvalid()
  return 0
endif


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR01           shipped[10] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  111     
*        Variable:            shipped[10]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      111                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr01     &&  shipped[10] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR02           shipped[10] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  111     
*        Variable:            shipped[10]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      112                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr02     &&  shipped[10] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR06           unit0[10] WHEN                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  112     
*        Variable:            unit0[10]                          
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      113                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr06     &&  unit0[10] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR08           unit0[10] VALID                    
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  112     
*        Variable:            unit0[10]                          
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      114                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr08     &&  unit0[10] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR0A           price[10] WHEN                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  113     
*        Variable:            price[10]                          
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      115                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr0a     &&  price[10] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR0D           price[10] VALID                    
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  113     
*        Variable:            price[10]                          
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      116                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr0d     &&  price[10] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR0F           linedisc[10] WHEN                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  114     
*        Variable:            linedisc[10]                       
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      117                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr0f     &&  linedisc[10] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR0H           linedisc[10] VALID                 
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  114     
*        Variable:            linedisc[10]                       
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      118                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr0h     &&  linedisc[10] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR0L           tracking[10] WHEN                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  116     
*        Variable:            tracking[10]                       
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      119                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr0l     &&  tracking[10] WHEN
#REGION 1
do cp
if m.edittitle = 'N'
  do namevalid
  _curobj = _curobj + 1
endif

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR26           tracking[10] VALID                 
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  116     
*        Variable:            tracking[10]                       
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      120                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr26     &&  tracking[10] VALID
#REGION 1
do namevalid


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR29           itemcode[11] WHEN                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  118     
*        Variable:            itemcode[11]                       
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      121                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr29     &&  itemcode[11] WHEN
#REGION 1
do cp
m.oldv = itemcode[pointer]

do auto

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR2C           itemcode[11] VALID                 
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  118     
*        Variable:            itemcode[11]                       
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      122                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr2c     &&  itemcode[11] VALID
#REGION 1
if !rvalid()
  return 0
endif


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR2F           shipped[11] WHEN                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  119     
*        Variable:            shipped[11]                        
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      123                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr2f     &&  shipped[11] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR2H           shipped[11] VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  119     
*        Variable:            shipped[11]                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      124                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr2h     &&  shipped[11] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR2K           unit0[11] WHEN                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  120     
*        Variable:            unit0[11]                          
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      125                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr2k     &&  unit0[11] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR2L           unit0[11] VALID                    
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  120     
*        Variable:            unit0[11]                          
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      126                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr2l     &&  unit0[11] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR2M           price[11] WHEN                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  121     
*        Variable:            price[11]                          
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      127                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr2m     &&  price[11] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR2N           price[11] VALID                    
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  121     
*        Variable:            price[11]                          
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      128                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr2n     &&  price[11] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR2O           linedisc[11] WHEN                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  122     
*        Variable:            linedisc[11]                       
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      129                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr2o     &&  linedisc[11] WHEN
#REGION 1
do cp
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR2P           linedisc[11] VALID                 
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  122     
*        Variable:            linedisc[11]                       
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      130                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr2p     &&  linedisc[11] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR2Z           tracking[11] WHEN                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  124     
*        Variable:            tracking[11]                       
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      131                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr2z     &&  tracking[11] WHEN
#REGION 1
do cp
if m.edittitle = 'N'
  do namevalid
  _curobj = _curobj + 1
endif

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR31           tracking[11] VALID                 
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  124     
*        Variable:            tracking[11]                       
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      132                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr31     &&  tracking[11] VALID
#REGION 1
do namevalid


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR34           itemcode[arraysize] WHEN           
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  126     
*        Variable:            itemcode[arraysize]                
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      133                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr34     &&  itemcode[arraysize] WHEN
#REGION 1
m.pointer = m.arraysize
m.oldv = itemcode[pointer]

do auto

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR37           itemcode[arraysize] VALID          
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  126     
*        Variable:            itemcode[arraysize]                
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      134                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr37     &&  itemcode[arraysize] VALID
#REGION 1
if !i7valid()
  return 0
endif


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR3A           shipped[arraysize] WHEN            
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  127     
*        Variable:            shipped[arraysize]                 
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      135                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr3a     &&  shipped[arraysize] WHEN
#REGION 1
m.pointer = m.arraysize
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR3C           shipped[arraysize] VALID           
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  127     
*        Variable:            shipped[arraysize]                 
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      136                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr3c     &&  shipped[arraysize] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR3F           unit0[arraysize] WHEN              
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  128     
*        Variable:            unit0[arraysize]                   
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      137                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr3f     &&  unit0[arraysize] WHEN
#REGION 1
m.pointer = m.arraysize
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR3H           unit0[arraysize] VALID             
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  128     
*        Variable:            unit0[arraysize]                   
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      138                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr3h     &&  unit0[arraysize] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR3K           price[arraysize] WHEN              
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  129     
*        Variable:            price[arraysize]                   
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      139                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr3k     &&  price[arraysize] WHEN
#REGION 1
m.pointer = m.arraysize
return mcheck()


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR3M           price[arraysize] VALID             
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  129     
*        Variable:            price[arraysize]                   
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      140                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr3m     &&  price[arraysize] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR3P           linedisc[arraysize] WHEN           
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  130     
*        Variable:            linedisc[arraysize]                
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      141                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr3p     &&  linedisc[arraysize] WHEN
#REGION 1
m.pointer = m.arraysize
return mcheck()

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR5A           linedisc[arraysize] VALID          
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  130     
*        Variable:            linedisc[arraysize]                
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      142                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr5a     &&  linedisc[arraysize] VALID
#REGION 1
do vtempsave
do sumext


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR5E           tracking[arraysize] WHEN           
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  132     
*        Variable:            tracking[arraysize]                
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      143                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr5e     &&  tracking[arraysize] WHEN
#REGION 1
m.pointer = m.arraysize
if m.edittitle = 'N'
  do lastvalid
endif

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR5G           tracking[arraysize] VALID          
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  132     
*        Variable:            tracking[arraysize]                
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      144                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr5g     &&  tracking[arraysize] VALID
#REGION 1
do lastvalid

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR5J           m.firstname VALID                  
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  135     
*        Variable:            m.firstname                        
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      145                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr5j     &&  m.firstname VALID
#REGION 1
do justafteri

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR5K           m.zip VALID                        
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  145     
*        Variable:            m.zip                              
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      146                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr5k     &&  m.zip VALID
#REGION 1
if !empty(m.zip)
  if empty(m.city)
    select zip
    set order to zip
    if seek(m.zip)
      m.city = zip.city
			m.state = zip.state
			show get m.state
      show get m.city
    endif
  endif
endif

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR5L           m.discount WHEN                    
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  148     
*        Variable:            m.discount                         
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      147                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr5l     &&  m.discount WHEN
#REGION 1
return mcheck()


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR5M           m.discount VALID                   
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  148     
*        Variable:            m.discount                         
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      148                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr5m     &&  m.discount VALID
#REGION 1
do ctotal


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR61           m.taxrate WHEN                     
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  152     
*        Variable:            m.taxrate                          
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      149                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr61     &&  m.taxrate WHEN
#REGION 1
return mcheck()


*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR64           m.taxrate VALID                    
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  152     
*        Variable:            m.taxrate                          
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      150                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr64     &&  m.taxrate VALID
#REGION 1
do ctotal

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR67           m.total WHEN                       
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  156     
*        Variable:            m.total                            
*        Called By:           WHEN Clause                        
*        Object Type:         Field                              
*        Snippet Number:      151                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr67     &&  m.total WHEN
#REGION 1
if mcheck()
  m.oldv = m.total
else
  return .f.
endif

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR6A           m.total VALID                      
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  156     
*        Variable:            m.total                            
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      152                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr6a     &&  m.total VALID
#REGION 1
if m.oldv != m.total
  do ctotal2
endif
m.oldv = ''

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR6E           m.payment VALID                    
*                                                                
*        Function Origin:                                        
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98,     Record Number:  159     
*        Variable:            m.payment                          
*        Called By:           VALID Clause                       
*        Object Type:         Field                              
*        Snippet Number:      153                                
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr6e     &&  m.payment VALID
#REGION 1
If m.payment > 0
	If m.payment < m.balance
		m.payment = 0.00
		=stopbox('Payment not valid')
		Return .F.
	else
		=payv()
	Endif
endif

*       靈컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*                                                                
*        _16S0TWR6I           Read Level Activate                
*                                                                
*        Function Origin:                                        
*                                                                
*                                                                
*        From Platform:       MS-DOS                             
*        From Screen:         POS98                              
*        Called By:           READ Statement                     
*        Snippet Number:      **                                 
*                                                                
*       聃컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*
FUNCTION _16s0twr6i     && Read Level Activate
*
* Activate Code from screen: POS98
*
#REGION 1
** Start of inserted file ..\ACTIVATE.PRG 컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴start
external array lno, itemcode, name1

if !empty(m.prekey) .and. ;
		m.lookupmode
	select (m.headfile)
	set order to pos
	if seek(m.prekey)
		scatter memvar memo
		m.addmode = .f.
		m.oldkey = m.prekey
		do loadkid with &headfile->pos, ;
			'pos'
	endif
	m.prekey = ''
	do picklang
else
	if m.oldv2 = 'pos98'
*	.and. !m.lookupmode
		do init
	endif	
endif

m.oldv2 = ''

show gets

	if m._lno = 'N'
		show get lno(1) disable
	else
		show get lno(1) enable
	endif

	if m._misc = 'N'
	  show get m.misc disable
	else
		show get m.misc enable
	endif
	
	if m._via = 'N'
	  show get m.via disable
	else
		show get m.via enable
	endif	

	if m._company = 'N'
	  show get m.company disable
	else
	  show get m.company enable
	endif
	
	if m._employee = 'N'
	  show get m.employee disable
	else
	  show get m.employee enable
	endif

	if m._clients = 'N'
	  show get m.clients disable
	else
		show get m.clients enable
	endif
	
	if m._notepad = 'N'
	  show get m.notepad disable
	else
		show get m.notepad enable
	endif


if m.maxno = 1
  if empty(itemcode(1))
    if empty(name1(1))
      name1(1) = m.login
			show get name1(1)
    endif
  endif
endif
** End of inserted file ..\ACTIVATE.PRG 컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴end
